[{"path":"https://bbuchsbaum.github.io/shard/AGENTS.html","id":null,"dir":"","previous_headings":"","what":"AGENTS.md - Agent Workflow Instructions","title":"AGENTS.md - Agent Workflow Instructions","text":"project uses beads (bd) git-backed issue tracking gastown (gt) multi-agent orchestration. Beads: https://github.com/steveyegge/beads Gastown: https://github.com/steveyegge/gastown Run bd onboard get started issue tracking.","code":""},{"path":"https://bbuchsbaum.github.io/shard/AGENTS.html","id":"gastown-multi-agent-orchestration","dir":"","previous_headings":"","what":"Gastown Multi-Agent Orchestration","title":"AGENTS.md - Agent Workflow Instructions","text":"Gastown coordinates multiple Claude Code agents working simultaneously persistent context git-backed storage.","code":""},{"path":[]},{"path":"https://bbuchsbaum.github.io/shard/AGENTS.html","id":"agent-roles","dir":"","previous_headings":"Gastown Multi-Agent Orchestration","what":"Agent Roles","title":"AGENTS.md - Agent Workflow Instructions","text":"Infrastructure Roles (manage system): - Mayor: Global coordinator (singleton, persistent) - Deacon: Background supervisor daemon - Witness: Per-rig lifecycle manager workers - Refinery: Per-rig merge queue processor Worker Roles (perform project work): - Crew: Persistent workers human control; ideal exploratory work - Polecat: Ephemeral workers managed Witness; best discrete tasks","code":""},{"path":"https://bbuchsbaum.github.io/shard/AGENTS.html","id":"essential-gastown-commands","dir":"","previous_headings":"Gastown Multi-Agent Orchestration","what":"Essential Gastown Commands","title":"AGENTS.md - Agent Workflow Instructions","text":"","code":"# Town & Rig Management gt install [path]              # Create a new town gt rig add <name> <url>        # Register project as a rig gt rig list                    # Show all rigs gt doctor                      # Run health diagnostics  # Work Assignment gt sling <bead> <rig>          # Assign work to polecat gt convoy create \"name\" [ids]  # Create tracked work batch gt convoy list                 # Show active convoys gt convoy status [id]          # Track convoy progress  # Session Management gt mayor attach                # Start/attach to coordinator gt handoff                     # Request context cycle gt peek <agent>                # Check agent health gt nudge <agent> \"message\"     # Send message to agent  # Merge Queue gt mq list [rig]               # Display merge queue gt mq submit                   # Queue current branch gt mq status <id>              # Detailed merge request info"},{"path":"https://bbuchsbaum.github.io/shard/AGENTS.html","id":"the-propulsion-principle-gupp","dir":"","previous_headings":"Gastown Multi-Agent Orchestration","what":"The Propulsion Principle (GUPP)","title":"AGENTS.md - Agent Workflow Instructions","text":"“find work hook, RUN .” Agents execute assigned work immediately without waiting confirmation. makes Gas Town coordinated, responsive system.","code":""},{"path":[]},{"path":[]},{"path":"https://bbuchsbaum.github.io/shard/AGENTS.html","id":"critical-rules-for-agents","dir":"","previous_headings":"Beads Issue Tracking","what":"Critical Rules for Agents","title":"AGENTS.md - Agent Workflow Instructions","text":"NEVER use bd edit - opens interactive editor. Use flag-based updates: Always use --json flag programmatic access Run bd sync changes ensure immediate git sync","code":"bd update <id> --description \"new description\" bd update <id> --title \"new title\""},{"path":"https://bbuchsbaum.github.io/shard/AGENTS.html","id":"finding-work","dir":"","previous_headings":"Beads Issue Tracking","what":"Finding Work","title":"AGENTS.md - Agent Workflow Instructions","text":"","code":"bd ready --json          # Tasks without blockers bd list --status open    # All open tasks bd stale --days 7        # Neglected tasks"},{"path":"https://bbuchsbaum.github.io/shard/AGENTS.html","id":"landing-the-plane-session-completion","dir":"","previous_headings":"","what":"Landing the Plane (Session Completion)","title":"AGENTS.md - Agent Workflow Instructions","text":"ending work session, MUST complete steps . Work complete git push succeeds. MANDATORY WORKFLOW: File issues remaining work - Create issues anything needs follow-Run quality gates (code changed) - Tests, linters, builds Update issue status - Close finished work, update -progress items PUSH REMOTE - MANDATORY: Clean - Clear stashes, prune remote branches Verify - changes committed pushed Hand - Provide context next session (use gt handoff gastown) CRITICAL RULES: - Work complete git push succeeds - NEVER stop pushing - leaves work stranded locally - NEVER say “ready push ” - must push - push fails, resolve retry succeeds","code":"git pull --rebase bd sync git push git status  # MUST show \"up to date with origin\""},{"path":[]},{"path":"https://bbuchsbaum.github.io/shard/CLAUDE.html","id":"multi-agent-orchestration-gastown","dir":"","previous_headings":"","what":"Multi-Agent Orchestration (Gastown)","title":"CLAUDE.md - Project Context for Claude","text":"project managed gastown multi-agent coordination. See https://github.com/steveyegge/gastown","code":""},{"path":"https://bbuchsbaum.github.io/shard/CLAUDE.html","id":"quick-reference","dir":"","previous_headings":"Multi-Agent Orchestration (Gastown)","what":"Quick Reference","title":"CLAUDE.md - Project Context for Claude","text":"","code":"gt mayor attach              # Start/attach to coordinator gt sling <bead> <rig>        # Assign work to agent gt convoy create \"name\"      # Create work batch gt convoy list               # Track progress gt handoff                   # Context cycle/session refresh gt mq submit                 # Queue branch for merge"},{"path":"https://bbuchsbaum.github.io/shard/CLAUDE.html","id":"key-concepts","dir":"","previous_headings":"Multi-Agent Orchestration (Gastown)","what":"Key Concepts","title":"CLAUDE.md - Project Context for Claude","text":"Mayor: Coordinator breaks work manages agents Polecat: Ephemeral worker discrete tasks Crew: Persistent worker exploratory/long-running work Convoy: Batch related work items tracking Hook: work queue - work , run immediately (GUPP)","code":""},{"path":"https://bbuchsbaum.github.io/shard/CLAUDE.html","id":"the-propulsion-principle","dir":"","previous_headings":"Multi-Agent Orchestration (Gastown)","what":"The Propulsion Principle","title":"CLAUDE.md - Project Context for Claude","text":"“work Hook, MUST RUN .” Execute assigned work immediately without waiting confirmation.","code":""},{"path":"https://bbuchsbaum.github.io/shard/CLAUDE.html","id":"issue-tracking-beads","dir":"","previous_headings":"","what":"Issue Tracking (Beads)","title":"CLAUDE.md - Project Context for Claude","text":"project uses beads git-backed issue tracking. See AGENTS.md full workflow. Critical: Never use bd edit (interactive). Use bd update <id> --field \"value\" instead.","code":"bd list                   # List open issues bd ready                  # Find next task (no blockers) bd create \"title\" -p 1    # Create issue (P0-P3 priority) bd show <id>              # View issue details bd update <id> --status in_progress  # Claim work bd close <id>             # Close issue bd sync                   # Sync to git"},{"path":"https://bbuchsbaum.github.io/shard/CLAUDE.html","id":"session-management","dir":"","previous_headings":"","what":"Session Management","title":"CLAUDE.md - Project Context for Claude","text":"ending work session, always “land plane”: File issues remaining work Run quality gates Update issue status Sync push: Provide handoff context (use gt handoff) Work complete git push succeeds.","code":"bd sync git pull --rebase git push"},{"path":"https://bbuchsbaum.github.io/shard/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2026 Bradley Buchsbaum Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://bbuchsbaum.github.io/shard/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Bradley Buchsbaum. Author, maintainer.","code":""},{"path":"https://bbuchsbaum.github.io/shard/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Buchsbaum B (2026). shard: Deterministic, Zero-Copy Parallel Execution R. R package version 0.1.0, https://bbuchsbaum.github.io/shard/.","code":"@Manual{,   title = {shard: Deterministic, Zero-Copy Parallel Execution for R},   author = {Bradley Buchsbaum},   year = {2026},   note = {R package version 0.1.0},   url = {https://bbuchsbaum.github.io/shard/}, }"},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"shard","dir":"","previous_headings":"","what":"Deterministic, Zero-Copy Parallel Execution for R","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"Deterministic, zero-copy parallel execution R. shard parallel runtime workloads look like: - “run numeric kernel many slices big data” - “thousands independent tasks shared dataset” - “parallel GLM / simulation / bootstrap / feature screening” focuses three things often painful R parallelism: 1) Shared immutable inputs (avoid duplicating large objects across workers) 2) Explicit output buffers (avoid huge result-gather lists) 3) Deterministic cleanup (supervise workers recycle memory drift)","code":""},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"CRAN (released): Development version:","code":"install.packages(\"shard\") # install.packages(\"pak\") pak::pak(\"your-org/shard\")"},{"path":[]},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"id_1-share-large-inputs-read-only-by-default","dir":"","previous_headings":"Core concepts","what":"1) Share large inputs (read-only by default)","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"Shared objects designed zero-copy parallel reads (OS allows) treated immutable default inside parallel tasks.","code":"X <- shard::share(X)   # matrix/array/vector Y <- shard::share(Y)"},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"id_2-allocate-explicit-output-buffers","dir":"","previous_headings":"Core concepts","what":"2) Allocate explicit output buffers","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"Instead returning giant objects worker, write preallocated buffer:","code":"out <- shard::buffer(\"double\", dim = c(1e6))   # example: 1M outputs"},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"id_3-run-shard_map-over-shards","dir":"","previous_headings":"Core concepts","what":"3) Run shard_map() over shards","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"","code":"blocks <- shard::shards(1e6, block_size = \"auto\")  run <- shard::shard_map(   blocks,   borrow = list(X = X, Y = Y),   out = list(out = out),   workers = 8,   fun = function(block, X, Y, out) {     # block contains indices     idx <- block$idx     out[idx] <- colMeans(Y[, idx, drop = FALSE])   } )  shard::report(run)"},{"path":[]},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"borrowed-inputs-are-immutable","dir":"","previous_headings":"Safety defaults (and why they matter)","what":"Borrowed inputs are immutable","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"default, trying mutate borrowed/shared inputs treated bug: - cow = \"deny\" (default): mutation triggers error - cow = \"audit\": detect flag (best-effort; platform dependent) - cow = \"allow\": allow copy--write, track , enforce budgets default deny: - Prevents silent memory blowups accidental wide writes - Prevents subtle correctness bugs (changes private worker) - Keeps behavior predictable across platforms","code":""},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"deterministic-cleanup-via-worker-supervision","dir":"","previous_headings":"","what":"Deterministic cleanup via worker supervision","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"R’s GC allocator behavior can lead memory drift long-running workers. shard monitors per-worker memory usage can recycle workers drift exceeds thresholds, keeping end--run memory close baseline.","code":""},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"diagnostics","dir":"","previous_headings":"","what":"Diagnostics","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"run, shard can report: - total per-worker peak RSS - end RSS vs baseline - materialized bytes (hidden copies) - recycling events, retries, timing","code":"rep <- shard::report(run) print(rep)  shard::mem_report(run) shard::copy_report(run)"},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"apply-style-wrappers-memshare-like-ergonomics","dir":"","previous_headings":"","what":"Apply-style wrappers (memshare-like ergonomics)","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"workload basically “apply function columns” “lapply list”, shard provides thin convenience wrappers still run supervised runtime.","code":""},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"column-wise-apply-scalar-return","dir":"","previous_headings":"Apply-style wrappers (memshare-like ergonomics)","what":"Column-wise apply (scalar return)","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"","code":"X <- matrix(rnorm(1e6), nrow = 1000)  scores <- shard::shard_apply_matrix(   X,   MARGIN = 2,   FUN = function(v, y) cor(v, y),   VARS = list(y = rnorm(nrow(X))),   workers = 8 )"},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"list-lapply-guarded-gather","dir":"","previous_headings":"Apply-style wrappers (memshare-like ergonomics)","what":"List lapply (guarded gather)","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"large outputs (big vectors/data.frames per element), prefer buffer(), table_sink(), shard_reduce() instead gathering everything master.","code":"xs <- lapply(1:1000, function(i) rnorm(100))  out <- shard::shard_lapply_shared(   xs,   FUN = function(el) mean(el),   workers = 8 )"},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"integration-with-foreach-optional","dir":"","previous_headings":"","what":"Integration with foreach (optional)","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"shard can used directly via shard_map(). compatibility existing foreach code, companion backend package can register %dopar% backend. (See doShard package project ecosystem.)","code":""},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"vignettes","dir":"","previous_headings":"","what":"Vignettes","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"Vignettes planned yet included package source.","code":""},{"path":"https://bbuchsbaum.github.io/shard/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Deterministic, Zero-Copy Parallel Execution for R","text":"MIT","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/adapter.html","id":null,"dir":"Reference","previous_headings":"","what":"Adapter Registry for Class-Specific Deep Sharing — adapter","title":"Adapter Registry for Class-Specific Deep Sharing — adapter","text":"Register custom traversal logic specific classes deep sharing operations. Adapters allow fine-grained control objects decomposed reconstructed.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/adapter.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Adapter Registry for Class-Specific Deep Sharing — adapter","text":"adapter registry provides way customize specific classes handled deep sharing. Instead generic slot traversal S4 objects element-wise traversal lists, can provide custom functions : Extract shareable children object (children) Reconstruct object shared children (replace) useful : Complex S4 objects certain slots shared S3 objects internal structure differs list structure Objects accessors used instead direct slot access","code":""},{"path":[]},{"path":"https://bbuchsbaum.github.io/shard/reference/affinity.html","id":null,"dir":"Reference","previous_headings":"","what":"CPU Affinity + mmap Advice (Advanced) — affinity","title":"CPU Affinity + mmap Advice (Advanced) — affinity","text":"controls opt-best-effort. unsupported platforms, safely -op (returning FALSE).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/affinity_supported.html","id":null,"dir":"Reference","previous_headings":"","what":"Check whether CPU affinity is supported — affinity_supported","title":"Check whether CPU affinity is supported — affinity_supported","text":"Currently supported Linux .","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/affinity_supported.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check whether CPU affinity is supported — affinity_supported","text":"","code":"affinity_supported()"},{"path":"https://bbuchsbaum.github.io/shard/reference/affinity_supported.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check whether CPU affinity is supported — affinity_supported","text":"Logical.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/altrep.html","id":null,"dir":"Reference","previous_headings":"","what":"ALTREP Shared Vectors — altrep","title":"ALTREP Shared Vectors — altrep","text":"ALTREP-backed zero-copy vectors shared memory.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/altrep.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"ALTREP Shared Vectors — altrep","text":"functions create ALTREP (Alternative Representation) vectors backed shared memory segments. key benefits : Zero-copy subsetting: Contiguous subsets return views shared memory, copies. Diagnostics: Track data pointers accessed vectors materialized (copied standard R vectors). Read-protection: Optionally prevent write access protect shared data. Supported types: integer, double/numeric, logical, raw.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/arena.html","id":null,"dir":"Reference","previous_headings":"","what":"Arena Semantic Scope — arena","title":"Arena Semantic Scope — arena","text":"Semantic scope scratch memory signals temporary data accumulate. Enables memory-conscious parallel execution. Evaluates expression semantic scope signals scratch memory usage. enables memory-conscious execution temporaries expected reclaimed scope exits.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/arena.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Arena Semantic Scope — arena","text":"","code":"arena(   expr,   strict = FALSE,   escape_threshold = .arena_escape_threshold,   gc_after = strict,   diagnostics = FALSE )"},{"path":"https://bbuchsbaum.github.io/shard/reference/arena.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Arena Semantic Scope — arena","text":"expr expression evaluate within arena scope. strict Logical. TRUE, enables strict mode : Warns large objects (> 1MB default) escape scope Triggers garbage collection scope exit Tracks memory growth diagnostics Default FALSE compatibility performance. escape_threshold Numeric. Size bytes returned objects trigger warning strict mode. Default 1MB (1048576 bytes). used strict = TRUE. gc_after Logical. TRUE, triggers garbage collection arena scope exits. Default TRUE strict mode, FALSE otherwise. diagnostics Logical. TRUE, returns diagnostics memory usage along result. Default FALSE.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/arena.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Arena Semantic Scope — arena","text":"result evaluating expr. diagnostics = TRUE, returns list : result: expression result diagnostics: Memory usage information","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/arena.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Arena Semantic Scope — arena","text":"arena() function provides semantic scope signals \"code produces scratch data outlive scope.\" serves two purposes: compiled kernels: Rust-based kernels available, arena() provides real scratch arenas backed temporary shared memory segments automatically reclaimed. arbitrary R code: Triggers post-task memory checks detect growth potential memory leaks. strict parameter controls escape detection: strict = FALSE (default): Returns results normally, logs diagnostics memory growth. strict = TRUE: Warns errors large objects escape scope, triggers aggressive memory reclamation.","code":""},{"path":[]},{"path":"https://bbuchsbaum.github.io/shard/reference/arena.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Arena Semantic Scope — arena","text":"","code":"if (FALSE) { # \\dontrun{ # Basic usage - wrap scratch computation result <- arena({   # Large temporaries created here won't accumulate   tmp <- matrix(rnorm(1e6), nrow = 1000)   colMeans(tmp)  # Only the means escape })  # Strict mode - warns on large escapes result <- arena({   big <- rnorm(1e7)  # 80MB   big  # Warning: large object escaping }, strict = TRUE)  # Get diagnostics about memory usage info <- arena({   x <- rnorm(1e5)   sum(x) }, diagnostics = TRUE) info$diagnostics  # Memory tracking info } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/arena_depth.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Current Arena Depth — arena_depth","title":"Get Current Arena Depth — arena_depth","text":"Returns nesting depth arena scopes. Useful debugging.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/arena_depth.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Current Arena Depth — arena_depth","text":"","code":"arena_depth()"},{"path":"https://bbuchsbaum.github.io/shard/reference/arena_depth.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Current Arena Depth — arena_depth","text":"Integer count nested arena scopes (0 arena).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/as_shared.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a shared vector from an existing R vector — as_shared","title":"Create a shared vector from an existing R vector — as_shared","text":"Convenience function creates segment, writes data, returns ALTREP view.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/as_shared.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a shared vector from an existing R vector — as_shared","text":"","code":"as_shared(x, readonly = TRUE, backing = \"auto\", cow = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/as_shared.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a shared vector from an existing R vector — as_shared","text":"x atomic vector (integer, double, logical, raw) readonly TRUE, prevent write access (default: TRUE) backing Backing type segment: \"auto\", \"mmap\", \"shm\" cow Copy--write policy resulting shared vector. One \"deny\", \"audit\", \"allow\". NULL, defaults based readonly.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/as_shared.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a shared vector from an existing R vector — as_shared","text":"ALTREP vector backed shared memory","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/as_shared.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a shared vector from an existing R vector — as_shared","text":"","code":"if (FALSE) { # \\dontrun{ # Convert existing vector to shared x <- as_shared(1:100) is_shared_vector(x)  # TRUE  # Subsetting returns views y <- x[1:10] is_shared_vector(y)  # TRUE for contiguous subsets } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/as_tibble.html","id":null,"dir":"Reference","previous_headings":"","what":"Materialize a shard table handle as a data.frame/tibble — as_tibble","title":"Materialize a shard table handle as a data.frame/tibble — as_tibble","text":"Materialize shard table handle data.frame/tibble","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/as_tibble.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Materialize a shard table handle as a data.frame/tibble — as_tibble","text":"","code":"as_tibble(x, max_bytes = 256 * 1024^2, ...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/as_tibble.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Materialize a shard table handle as a data.frame/tibble — as_tibble","text":"x shard table object. max_bytes Warn estimated payload exceeds threshold. ... Reserved future extensions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/as_tibble.shard_table_buffer.html","id":null,"dir":"Reference","previous_headings":"","what":"Materialize a fixed table handle or buffer — as_tibble.shard_table_buffer","title":"Materialize a fixed table handle or buffer — as_tibble.shard_table_buffer","text":"Converts shard_table_handle -memory data.frame (tibble tibble package installed).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/as_tibble.shard_table_buffer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Materialize a fixed table handle or buffer — as_tibble.shard_table_buffer","text":"","code":"# S3 method for class 'shard_table_buffer' as_tibble(x, max_bytes = 256 * 1024^2, ...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/as_tibble.shard_table_buffer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Materialize a fixed table handle or buffer — as_tibble.shard_table_buffer","text":"x shard_table_handle shard_table_buffer. max_bytes Warn estimated payload exceeds threshold. ... Reserved future extensions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/as_tibble.shard_table_buffer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Materialize a fixed table handle or buffer — as_tibble.shard_table_buffer","text":"data.frame (tibble).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/assert_positive_int.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate Positive Integer — assert_positive_int","title":"Validate Positive Integer — assert_positive_int","text":"Validate Positive Integer","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/assert_positive_int.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate Positive Integer — assert_positive_int","text":"","code":"assert_positive_int(x, name = \"value\")"},{"path":"https://bbuchsbaum.github.io/shard/reference/assert_positive_int.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate Positive Integer — assert_positive_int","text":"x Value validate. name Name error messages.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/assert_positive_int.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate Positive Integer — assert_positive_int","text":"Integer value.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/autotune_block_size.html","id":null,"dir":"Reference","previous_headings":"","what":"Autotune Block Size — autotune_block_size","title":"Autotune Block Size — autotune_block_size","text":"Determines optimal block size based worker count constraints.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/autotune_block_size.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Autotune Block Size — autotune_block_size","text":"","code":"autotune_block_size(   n,   workers,   min_shards_per_worker = 4L,   max_shards_per_worker = 64L,   scratch_bytes_per_item = 0,   scratch_budget = 0 )"},{"path":"https://bbuchsbaum.github.io/shard/reference/autotune_block_size.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Autotune Block Size — autotune_block_size","text":"n Total items. workers Number workers. min_shards_per_worker Minimum shards per worker. max_shards_per_worker Maximum shards per worker. scratch_bytes_per_item Scratch bytes per item. scratch_budget Total scratch budget.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/autotune_block_size.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Autotune Block Size — autotune_block_size","text":"Integer block size.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/available_backings.html","id":null,"dir":"Reference","previous_headings":"","what":"Get available shared memory backing types — available_backings","title":"Get available shared memory backing types — available_backings","text":"Get available shared memory backing types","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/available_backings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get available shared memory backing types — available_backings","text":"","code":"available_backings()"},{"path":"https://bbuchsbaum.github.io/shard/reference/available_backings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get available shared memory backing types — available_backings","text":"Character vector available backing types","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer.html","id":null,"dir":"Reference","previous_headings":"","what":"Shared Memory Buffers — buffer","title":"Shared Memory Buffers — buffer","text":"Create typed writable output buffers backed shared memory cross-process writes parallel execution. Creates typed output buffer backed shared memory can written parallel workers using slice assignment.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shared Memory Buffers — buffer","text":"","code":"buffer(   type = c(\"double\", \"integer\", \"logical\", \"raw\"),   dim,   init = NULL,   backing = c(\"auto\", \"mmap\", \"shm\") )"},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Shared Memory Buffers — buffer","text":"type Character. Data type: \"double\" (default), \"integer\", \"logical\", \"raw\". dim Integer vector. Dimensions buffer. vector, specify length. matrix, specify c(nrow, ncol). arrays, specify dimensions. init Initial value fill buffer. Default type-appropriate zero (0, 0L, FALSE, raw(0)). backing Backing type shared memory: \"auto\" (default), \"mmap\", \"shm\".","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Shared Memory Buffers — buffer","text":"S3 object class \"shard_buffer\" supports: Slice assignment: buf[idx] <- values Slice reading: buf[idx] Full extraction: buf[] Conversion R vector: .vector(buf), .double(buf), etc.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Shared Memory Buffers — buffer","text":"Buffers provide explicit output mechanism shard_map. Instead returning results workers (requires serialization memory copying), workers write directly shared buffers. Supported types: \"double\": 8-byte floating point (default) \"integer\": 4-byte signed integer \"logical\": 4-byte logical (stored integer) \"raw\": 1-byte raw data Buffers support slice assignment using standard R indexing: buf[1:100] <- values","code":""},{"path":[]},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Shared Memory Buffers — buffer","text":"","code":"if (FALSE) { # \\dontrun{ # Create a 1M element double buffer out <- buffer(\"double\", dim = 1e6)  # Write to slices (typically done in workers) out[1:1000] <- rnorm(1000) out[1001:2000] <- rnorm(1000)  # Read back results result <- out[]  # or as.double(out)  # Matrix buffer mat <- buffer(\"double\", dim = c(100, 50)) mat[1:10, ] <- matrix(1:500, nrow = 10) } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_advise.html","id":null,"dir":"Reference","previous_headings":"","what":"Advise access pattern for a buffer — buffer_advise","title":"Advise access pattern for a buffer — buffer_advise","text":"Advise access pattern buffer","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_advise.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Advise access pattern for a buffer — buffer_advise","text":"","code":"buffer_advise(   x,   advice = c(\"normal\", \"sequential\", \"random\", \"willneed\", \"dontneed\") )"},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_advise.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Advise access pattern for a buffer — buffer_advise","text":"x shard_buffer. advice See segment_advise().","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_advise.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Advise access pattern for a buffer — buffer_advise","text":"Logical.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_close.html","id":null,"dir":"Reference","previous_headings":"","what":"Close a Buffer — buffer_close","title":"Close a Buffer — buffer_close","text":"Closes buffer releases underlying shared memory.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_close.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Close a Buffer — buffer_close","text":"","code":"buffer_close(x, unlink = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_close.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Close a Buffer — buffer_close","text":"x shard_buffer object. unlink Whether unlink underlying segment.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_close.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Close a Buffer — buffer_close","text":"NULL (invisibly).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_diagnostics.html","id":null,"dir":"Reference","previous_headings":"","what":"Buffer Diagnostics — buffer_diagnostics","title":"Buffer Diagnostics — buffer_diagnostics","text":"Returns per-process counters shard buffer writes. shard_map uses internally report write volume/operations copy_report().","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_diagnostics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Buffer Diagnostics — buffer_diagnostics","text":"","code":"buffer_diagnostics()"},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_diagnostics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Buffer Diagnostics — buffer_diagnostics","text":"list writes bytes.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Buffer Info — buffer_info","title":"Get Buffer Info — buffer_info","text":"Returns information buffer.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Buffer Info — buffer_info","text":"","code":"buffer_info(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Buffer Info — buffer_info","text":"x shard_buffer object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Buffer Info — buffer_info","text":"list buffer properties.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_open.html","id":null,"dir":"Reference","previous_headings":"","what":"Open an Existing Buffer — buffer_open","title":"Open an Existing Buffer — buffer_open","text":"Opens shared memory buffer created another process. Used workers attach parent's output buffer.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_open.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Open an Existing Buffer — buffer_open","text":"","code":"buffer_open(path, type, dim, backing = c(\"mmap\", \"shm\"), readonly = FALSE)"},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_open.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Open an Existing Buffer — buffer_open","text":"path Path shm name buffer's segment. type Character. Data type buffer. dim Integer vector. Dimensions buffer. backing Backing type: \"mmap\" \"shm\". readonly Logical. Open read-? Default FALSE workers.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_open.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Open an Existing Buffer — buffer_open","text":"S3 object class \"shard_buffer\".","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_path.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Buffer Path — buffer_path","title":"Get Buffer Path — buffer_path","text":"Returns path name buffer's underlying segment. Use pass buffer location workers.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_path.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Buffer Path — buffer_path","text":"","code":"buffer_path(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_path.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Buffer Path — buffer_path","text":"x shard_buffer object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/buffer_path.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Buffer Path — buffer_path","text":"Character string path/name, NULL anonymous.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/capture_time.html","id":null,"dir":"Reference","previous_headings":"","what":"Capture Time — capture_time","title":"Capture Time — capture_time","text":"Simple timing wrapper.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/capture_time.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Capture Time — capture_time","text":"","code":"capture_time(expr)"},{"path":"https://bbuchsbaum.github.io/shard/reference/capture_time.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Capture Time — capture_time","text":"expr Expression time.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/capture_time.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Capture Time — capture_time","text":"List result elapsed time.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/close.shard_shared.html","id":null,"dir":"Reference","previous_headings":"","what":"Close a Shared Object — close.shard_shared","title":"Close a Shared Object — close.shard_shared","text":"Releases shared memory segment. closing, shared object can longer accessed.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/close.shard_shared.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Close a Shared Object — close.shard_shared","text":"","code":"# S3 method for class 'shard_shared' close(con, ...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/close.shard_shared.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Close a Shared Object — close.shard_shared","text":"con shard_shared object. ... Ignored.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/close.shard_shared.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Close a Shared Object — close.shard_shared","text":"NULL (invisibly).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/collect.html","id":null,"dir":"Reference","previous_headings":"","what":"Collect a shard table into memory — collect","title":"Collect a shard table into memory — collect","text":"collect() convenience alias as_tibble() shard table outputs.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/collect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Collect a shard table into memory — collect","text":"","code":"collect(x, ...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/collect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Collect a shard table into memory — collect","text":"x shard table handle. ... Passed as_tibble().","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/coltypes.html","id":null,"dir":"Reference","previous_headings":"","what":"Column Types — coltypes","title":"Column Types — coltypes","text":"Type constructors schema-driven table outputs.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/coltypes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Column Types — coltypes","text":"","code":"int32()  float64()  bool()  raw_col()  string_col()"},{"path":"https://bbuchsbaum.github.io/shard/reference/coltypes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Column Types — coltypes","text":"shard_coltype object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/copy_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Data Copy Report — copy_report","title":"Data Copy Report — copy_report","text":"Generates report data transfer copy statistics parallel execution.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/copy_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Data Copy Report — copy_report","text":"","code":"copy_report(result = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/copy_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Data Copy Report — copy_report","text":"result Optional. shard_result object extract copy stats .","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/copy_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Data Copy Report — copy_report","text":"S3 object class shard_report type \"copy\" containing: type: \"copy\" timestamp: report generated borrow_exports: Number borrowed input exports borrow_bytes: Total bytes borrowed inputs result_imports: Number result imports result_bytes: Estimated bytes results buffer_writes: Number buffer write operations buffer_bytes: Total bytes written buffers","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/copy_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Data Copy Report — copy_report","text":"","code":"if (FALSE) { # \\dontrun{ X <- matrix(rnorm(1e4), 100, 100) result <- shard_map(shards(10), function(s, X) sum(X[, s$idx]),                     borrow = list(X = X)) copy_report(result) } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/cow_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Copy-on-Write Policy Report — cow_report","title":"Copy-on-Write Policy Report — cow_report","text":"Generates report copy--write behavior borrowed inputs.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/cow_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Copy-on-Write Policy Report — cow_report","text":"","code":"cow_report(result = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/cow_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Copy-on-Write Policy Report — cow_report","text":"result Optional. shard_result object extract COW stats .","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/cow_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Copy-on-Write Policy Report — cow_report","text":"S3 object class shard_report type \"cow\" containing: type: \"cow\" timestamp: report generated policy: COW policy used (\"deny\", \"audit\", \"allow\") violations: Count COW violations detected (audit mode) copies_triggered: Estimated copies triggered mutations","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/cow_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Copy-on-Write Policy Report — cow_report","text":"","code":"if (FALSE) { # \\dontrun{ result <- shard_map(shards(10), function(s) s$idx, cow = \"audit\") cow_report(result) } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/create_contiguous_shards.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Contiguous Shards — create_contiguous_shards","title":"Create Contiguous Shards — create_contiguous_shards","text":"Creates shards consecutive indices.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/create_contiguous_shards.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Contiguous Shards — create_contiguous_shards","text":"","code":"create_contiguous_shards(n, block_size)"},{"path":"https://bbuchsbaum.github.io/shard/reference/create_contiguous_shards.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Contiguous Shards — create_contiguous_shards","text":"n Total items. block_size Items per shard.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/create_contiguous_shards.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Contiguous Shards — create_contiguous_shards","text":"List shard descriptors.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/create_shard_chunks.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Shard Chunks — create_shard_chunks","title":"Create Shard Chunks — create_shard_chunks","text":"Groups shards chunks dispatch. chunk contains self-contained executor function can run worker without needing package functions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/create_shard_chunks.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Shard Chunks — create_shard_chunks","text":"","code":"create_shard_chunks(shards, chunk_size, fun, borrow, out, kernel_meta = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/create_shard_chunks.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Shard Chunks — create_shard_chunks","text":"shards Shard descriptor. chunk_size Shards per chunk. fun User function. borrow Borrowed inputs. Output buffers.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/create_shard_chunks.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Shard Chunks — create_shard_chunks","text":"List chunk descriptors.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/create_strided_shards.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Strided Shards — create_strided_shards","title":"Create Strided Shards — create_strided_shards","text":"Creates shards interleaved indices.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/create_strided_shards.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Strided Shards — create_strided_shards","text":"","code":"create_strided_shards(n, num_shards)"},{"path":"https://bbuchsbaum.github.io/shard/reference/create_strided_shards.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Strided Shards — create_strided_shards","text":"n Total items. num_shards Number shards.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/create_strided_shards.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Strided Shards — create_strided_shards","text":"List shard descriptors.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/diagnostics.html","id":null,"dir":"Reference","previous_headings":"","what":"Diagnostics API — diagnostics","title":"Diagnostics API — diagnostics","text":"Comprehensive diagnostics shard parallel execution, providing insights memory usage, worker status, task execution, shared memory segments.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/diagnostics.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Diagnostics API — diagnostics","text":"diagnostics API provides multiple views shard's runtime behavior: report(): Primary entry point configurable detail levels mem_report(): Memory usage across workers cow_report(): Copy--write policy tracking copy_report(): Data transfer statistics task_report(): Task/chunk execution statistics segment_report(): Shared memory segment information functions return S3 shard_report objects appropriate print methods human-readable output.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dispatch.html","id":null,"dir":"Reference","previous_headings":"","what":"Task Dispatch Engine — dispatch","title":"Task Dispatch Engine — dispatch","text":"Orchestrates chunk dispatch worker supervision failure handling.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dispatch_chunks.html","id":null,"dir":"Reference","previous_headings":"","what":"Dispatch Chunks to Worker Pool — dispatch_chunks","title":"Dispatch Chunks to Worker Pool — dispatch_chunks","text":"Executes function chunks using worker pool supervision. Handles worker death recycling transparently requeuing failed chunks.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dispatch_chunks.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Dispatch Chunks to Worker Pool — dispatch_chunks","text":"","code":"dispatch_chunks(   chunks,   fun,   ...,   pool = NULL,   health_check_interval = 10L,   max_retries = 3L,   timeout = 3600,   scheduler_policy = NULL,   on_result = NULL,   store_results = TRUE,   retain_chunks = TRUE )"},{"path":"https://bbuchsbaum.github.io/shard/reference/dispatch_chunks.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Dispatch Chunks to Worker Pool — dispatch_chunks","text":"chunks List chunk descriptors. chunk passed fun. fun Function execute. Receives (chunk, ...) arguments. ... Additional arguments passed fun. pool shard_pool object. NULL, uses current pool. health_check_interval Integer. Check pool health every N chunks (default 10). max_retries Integer. Maximum retries per chunk permanent failure (default 3). timeout Numeric. Seconds wait chunk (default 3600). scheduler_policy Optional list scheduling hints (advanced). Currently: max_huge_concurrency: cap concurrent chunks footprint_class==\"huge\". on_result Optional callback (advanced). provided, called master process on_result(tag, value, worker_id) successful chunk completion. Used shard_reduce() stream reductions. store_results Logical (advanced). FALSE, successful chunk values retained returned results list (streaming use cases). retain_chunks Logical (advanced). FALSE, completed chunk descriptors stored minimally (avoids retaining large shard lists memory).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dispatch_chunks.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Dispatch Chunks to Worker Pool — dispatch_chunks","text":"shard_dispatch_result object results diagnostics.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-arena_depth.html","id":null,"dir":"Reference","previous_headings":"","what":"Get current arena depth — .arena_depth","title":"Get current arena depth — .arena_depth","text":"Get current arena depth","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-arena_depth.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get current arena depth — .arena_depth","text":"","code":".arena_depth()"},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-arena_depth.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get current arena depth — .arena_depth","text":"Integer depth","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-arena_pop.html","id":null,"dir":"Reference","previous_headings":"","what":"Pop an arena from the stack — .arena_pop","title":"Pop an arena from the stack — .arena_pop","text":"Pop arena stack","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-arena_pop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pop an arena from the stack — .arena_pop","text":"","code":".arena_pop(arena_id, run_gc = FALSE)"},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-arena_pop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pop an arena from the stack — .arena_pop","text":"arena_id ID verify popping right arena run_gc Whether trigger GC pop","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-arena_push.html","id":null,"dir":"Reference","previous_headings":"","what":"Push a new arena onto the stack — .arena_push","title":"Push a new arena onto the stack — .arena_push","text":"Push new arena onto stack","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-arena_push.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Push a new arena onto the stack — .arena_push","text":"","code":".arena_push()"},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-arena_push.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Push a new arena onto the stack — .arena_push","text":"Arena ID matching pop","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-estimate_object_size.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate object size safely — .estimate_object_size","title":"Estimate object size safely — .estimate_object_size","text":"Estimate object size safely","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-estimate_object_size.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate object size safely — .estimate_object_size","text":"","code":".estimate_object_size(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-estimate_object_size.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate object size safely — .estimate_object_size","text":"x Object measure","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/dot-estimate_object_size.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate object size safely — .estimate_object_size","text":"Size bytes NA determine","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/ensure_pool.html","id":null,"dir":"Reference","previous_headings":"","what":"Ensure Pool Exists — ensure_pool","title":"Ensure Pool Exists — ensure_pool","text":"Creates validates worker pool.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/ensure_pool.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ensure Pool Exists — ensure_pool","text":"","code":"ensure_pool(workers, mem_cap, rss_drift_threshold, packages, init_expr)"},{"path":"https://bbuchsbaum.github.io/shard/reference/ensure_pool.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ensure Pool Exists — ensure_pool","text":"workers Number workers. mem_cap Memory cap bytes. rss_drift_threshold Drift threshold. packages Packages load. init_expr Init expression.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/ensure_pool.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Ensure Pool Exists — ensure_pool","text":"Pool object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/ergonomics.html","id":null,"dir":"Reference","previous_headings":"","what":"Ergonomic Apply/Lapply Wrappers — ergonomics","title":"Ergonomic Apply/Lapply Wrappers — ergonomics","text":"Convenience wrappers provide apply/lapply-style ergonomics preserving shard's core contract: shared immutable inputs, supervised execution, diagnostics. functions intentionally thin wrappers around shard_map() related primitives.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/export_borrow_to_workers.html","id":null,"dir":"Reference","previous_headings":"","what":"Export Borrowed Inputs to Workers — export_borrow_to_workers","title":"Export Borrowed Inputs to Workers — export_borrow_to_workers","text":"Exports borrowed data workers (, reused across shards).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/export_borrow_to_workers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Export Borrowed Inputs to Workers — export_borrow_to_workers","text":"","code":"export_borrow_to_workers(pool, borrow)"},{"path":"https://bbuchsbaum.github.io/shard/reference/export_borrow_to_workers.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Export Borrowed Inputs to Workers — export_borrow_to_workers","text":"pool Worker pool. borrow List borrowed inputs.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/export_out_to_workers.html","id":null,"dir":"Reference","previous_headings":"","what":"Export Output Buffers to Workers — export_out_to_workers","title":"Export Output Buffers to Workers — export_out_to_workers","text":"Exports output buffer references workers.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/export_out_to_workers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Export Output Buffers to Workers — export_out_to_workers","text":"","code":"export_out_to_workers(pool, out)"},{"path":"https://bbuchsbaum.github.io/shard/reference/export_out_to_workers.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Export Output Buffers to Workers — export_out_to_workers","text":"pool Worker pool. List output buffers.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/factor_col.html","id":null,"dir":"Reference","previous_headings":"","what":"Categorical column type — factor_col","title":"Categorical column type — factor_col","text":"Stores factors int32 codes plus shared levels metadata.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/factor_col.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Categorical column type — factor_col","text":"","code":"factor_col(levels)"},{"path":"https://bbuchsbaum.github.io/shard/reference/factor_col.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Categorical column type — factor_col","text":"levels Character vector allowed levels.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/factor_col.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Categorical column type — factor_col","text":"shard_coltype object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/fetch.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch Data from a Shared Object — fetch","title":"Fetch Data from a Shared Object — fetch","text":"Retrieves R object shared memory deserializing . primary way access shared data workers.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/fetch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch Data from a Shared Object — fetch","text":"","code":"fetch(x, ...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/fetch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch Data from a Shared Object — fetch","text":"x shard_shared object. ... Ignored.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/fetch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch Data from a Shared Object — fetch","text":"original R object shared.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/fetch.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fetch Data from a Shared Object — fetch","text":"called main process, reads existing segment. called worker process, opens segment path deserializes data. fetch() function primary way access shared data. can also called materialize() compatibility.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/fetch.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fetch Data from a Shared Object — fetch","text":"","code":"if (FALSE) { # \\dontrun{ x <- 1:1000 shared <- share(x) recovered <- fetch(shared) identical(x, recovered)  # TRUE } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/format_bytes.html","id":null,"dir":"Reference","previous_headings":"","what":"Format Bytes as Human-Readable String — format_bytes","title":"Format Bytes as Human-Readable String — format_bytes","text":"Format Bytes Human-Readable String","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/format_bytes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Format Bytes as Human-Readable String — format_bytes","text":"","code":"format_bytes(bytes, digits = 1)"},{"path":"https://bbuchsbaum.github.io/shard/reference/format_bytes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Format Bytes as Human-Readable String — format_bytes","text":"bytes Numeric value bytes. digits Integer. Decimal places (default 1).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/format_bytes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Format Bytes as Human-Readable String — format_bytes","text":"Character string like \"1.5 GB\".","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/get_profile_settings.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Profile Settings — get_profile_settings","title":"Get Profile Settings — get_profile_settings","text":"Returns settings based execution profile.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/get_profile_settings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Profile Settings — get_profile_settings","text":"","code":"get_profile_settings(profile, mem_cap, recycle)"},{"path":"https://bbuchsbaum.github.io/shard/reference/get_profile_settings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Profile Settings — get_profile_settings","text":"profile Profile name. mem_cap User-specified memory cap. recycle User-specified recycle setting.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/get_profile_settings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Profile Settings — get_profile_settings","text":"List settings.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/idx_range.html","id":null,"dir":"Reference","previous_headings":"","what":"Contiguous index range — idx_range","title":"Contiguous index range — idx_range","text":"Creates compact, serializable range descriptor contiguous indices. avoids allocating explicit index vector large slices.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/idx_range.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Contiguous index range — idx_range","text":"","code":"idx_range(start, end)"},{"path":"https://bbuchsbaum.github.io/shard/reference/idx_range.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Contiguous index range — idx_range","text":"start Integer. Start index (1-based, inclusive). end Integer. End index (1-based, inclusive).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/idx_range.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Contiguous index range — idx_range","text":"object class shard_idx_range.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/in_arena.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if Currently Inside an Arena — in_arena","title":"Check if Currently Inside an Arena — in_arena","text":"Returns TRUE current execution context within arena() scope.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/in_arena.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if Currently Inside an Arena — in_arena","text":"","code":"in_arena()"},{"path":"https://bbuchsbaum.github.io/shard/reference/in_arena.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if Currently Inside an Arena — in_arena","text":"Logical indicating whether arena scope.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/in_arena.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if Currently Inside an Arena — in_arena","text":"","code":"in_arena()  # FALSE #> [1] FALSE arena({   in_arena()  # TRUE }) #> [1] TRUE"},{"path":"https://bbuchsbaum.github.io/shard/reference/is_shared.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if Object is Shared — is_shared","title":"Check if Object is Shared — is_shared","text":"Check Object Shared","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/is_shared.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if Object is Shared — is_shared","text":"","code":"is_shared(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/is_shared.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if Object is Shared — is_shared","text":"x object check.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/is_shared.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if Object is Shared — is_shared","text":"TRUE x shard_shared shard_deep_shared object, FALSE otherwise.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/is_shared.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if Object is Shared — is_shared","text":"","code":"is_shared(share(1:10))  # TRUE #> [1] TRUE is_shared(1:10)         # FALSE #> [1] FALSE"},{"path":"https://bbuchsbaum.github.io/shard/reference/is_shared_vector.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if an object is a shared vector — is_shared_vector","title":"Check if an object is a shared vector — is_shared_vector","text":"Check object shared vector","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/is_shared_vector.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if an object is a shared vector — is_shared_vector","text":"","code":"is_shared_vector(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/is_shared_vector.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if an object is a shared vector — is_shared_vector","text":"x R object","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/is_shared_vector.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if an object is a shared vector — is_shared_vector","text":"TRUE x shard ALTREP vector, FALSE otherwise","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/is_shared_vector.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if an object is a shared vector — is_shared_vector","text":"","code":"if (FALSE) { # \\dontrun{ seg <- segment_create(400) segment_write(seg, 1:100, offset = 0) x <- shared_vector(seg, \"integer\", length = 100)  is_shared_vector(x)    # TRUE is_shared_vector(1:10) # FALSE } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/is_view.html","id":null,"dir":"Reference","previous_headings":"","what":"View Predicates — is_view","title":"View Predicates — is_view","text":"View Predicates","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/is_view.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"View Predicates — is_view","text":"","code":"is_view(x)  is_block_view(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/is_view.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"View Predicates — is_view","text":"x object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/is_view.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"View Predicates — is_view","text":"Logical. TRUE x shard view (block view).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/is_windows.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if running on Windows — is_windows","title":"Check if running on Windows — is_windows","text":"Check running Windows","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/is_windows.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if running on Windows — is_windows","text":"","code":"is_windows()"},{"path":"https://bbuchsbaum.github.io/shard/reference/is_windows.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if running on Windows — is_windows","text":"TRUE Windows, FALSE otherwise","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/iterate_row_groups.html","id":null,"dir":"Reference","previous_headings":"","what":"Iterate row groups — iterate_row_groups","title":"Iterate row groups — iterate_row_groups","text":"Iterate row groups","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/iterate_row_groups.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Iterate row groups — iterate_row_groups","text":"","code":"iterate_row_groups(x, decode = TRUE)"},{"path":"https://bbuchsbaum.github.io/shard/reference/iterate_row_groups.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Iterate row groups — iterate_row_groups","text":"x shard_row_groups handle. decode Logical. TRUE (default), native-encoded partitions decoded data.frames. FALSE, native partitions returned internal representation (advanced).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/iterate_row_groups.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Iterate row groups — iterate_row_groups","text":"iterator function args returns next data.frame NULL.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/list_kernels.html","id":null,"dir":"Reference","previous_headings":"","what":"List registered kernels — list_kernels","title":"List registered kernels — list_kernels","text":"List registered kernels","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/list_kernels.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List registered kernels — list_kernels","text":"","code":"list_kernels()"},{"path":"https://bbuchsbaum.github.io/shard/reference/list_kernels.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List registered kernels — list_kernels","text":"character vector registered kernel names.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/make_chunk_executor.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Chunk Executor Function — make_chunk_executor","title":"Create Chunk Executor Function — make_chunk_executor","text":"Creates self-contained function can execute chunk worker. function passed dispatch_chunks runs entirely within worker process.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/make_chunk_executor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Chunk Executor Function — make_chunk_executor","text":"","code":"make_chunk_executor(auto_table = FALSE)"},{"path":"https://bbuchsbaum.github.io/shard/reference/make_chunk_executor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Chunk Executor Function — make_chunk_executor","text":"function executes chunks.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/materialize.html","id":null,"dir":"Reference","previous_headings":"","what":"Materialize Shared Object — materialize","title":"Materialize Shared Object — materialize","text":"Alias fetch(). Retrieves R object shared memory.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/materialize.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Materialize Shared Object — materialize","text":"","code":"materialize(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/materialize.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Materialize Shared Object — materialize","text":"x shard_shared object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/materialize.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Materialize Shared Object — materialize","text":"original R object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/materialize.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Materialize Shared Object — materialize","text":"","code":"if (FALSE) { # \\dontrun{ shared <- share(1:100) data <- materialize(shared) } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/mem_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Memory Usage Report — mem_report","title":"Memory Usage Report — mem_report","text":"Generates report memory usage across workers pool.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/mem_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Memory Usage Report — mem_report","text":"","code":"mem_report(pool = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/mem_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Memory Usage Report — mem_report","text":"pool Optional. shard_pool object. NULL, uses current pool.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/mem_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Memory Usage Report — mem_report","text":"S3 object class shard_report type \"memory\" containing: type: \"memory\" timestamp: report generated pool_active: Whether pool exists n_workers: Number workers rss_limit: RSS limit per worker (bytes) total_rss: Sum RSS across workers peak_rss: Highest RSS among workers mean_rss: Mean RSS across workers workers: Per-worker RSS details","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/mem_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Memory Usage Report — mem_report","text":"","code":"if (FALSE) { # \\dontrun{ pool_create(4) mem_report() } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/null_coalesce.html","id":null,"dir":"Reference","previous_headings":"","what":"Null-coalescing Operator — null_coalesce","title":"Null-coalescing Operator — null_coalesce","text":"Null-coalescing Operator","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/null_coalesce.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Null-coalescing Operator — null_coalesce","text":"","code":"x %||% y"},{"path":"https://bbuchsbaum.github.io/shard/reference/null_coalesce.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Null-coalescing Operator — null_coalesce","text":"x Value check. y Default value x NULL.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/null_coalesce.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Null-coalescing Operator — null_coalesce","text":"x NULL, otherwise y.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/parse_bytes.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse Human-Readable Byte Strings — parse_bytes","title":"Parse Human-Readable Byte Strings — parse_bytes","text":"Converts strings like \"2GB\", \"512MB\", \"1.5GB\" bytes.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/parse_bytes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse Human-Readable Byte Strings — parse_bytes","text":"","code":"parse_bytes(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/parse_bytes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse Human-Readable Byte Strings — parse_bytes","text":"x Character numeric. numeric, returned -.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/parse_bytes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse Human-Readable Byte Strings — parse_bytes","text":"Numeric value bytes.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/parse_count.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse Count String — parse_count","title":"Parse Count String — parse_count","text":"Parses strings like \"1K\", \"10K\", \"1M\" integers.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/parse_count.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse Count String — parse_count","text":"","code":"parse_count(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/parse_count.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse Count String — parse_count","text":"x Character string.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/parse_count.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse Count String — parse_count","text":"Integer value.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pid_is_alive.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if PID is Alive — pid_is_alive","title":"Check if PID is Alive — pid_is_alive","text":"Check PID Alive","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pid_is_alive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if PID is Alive — pid_is_alive","text":"","code":"pid_is_alive(pid)"},{"path":"https://bbuchsbaum.github.io/shard/reference/pid_is_alive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if PID is Alive — pid_is_alive","text":"pid Process ID check.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pid_is_alive.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if PID is Alive — pid_is_alive","text":"Logical.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pin_workers.html","id":null,"dir":"Reference","previous_headings":"","what":"Pin shard workers to CPU cores — pin_workers","title":"Pin shard workers to CPU cores — pin_workers","text":"Best-effort worker pinning improve cache locality reduce cross-core migration. Currently supported Linux .","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pin_workers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pin shard workers to CPU cores — pin_workers","text":"","code":"pin_workers(pool = NULL, strategy = c(\"spread\", \"compact\"), cores = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/pin_workers.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pin shard workers to CPU cores — pin_workers","text":"pool Optional shard_pool. Defaults current pool. strategy \"spread\" assigns worker -> core mod ncores. \"compact\" assigns workers first cores. cores Optional integer vector available cores (0-based). NULL, uses 0:(detectCores()-1).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pin_workers.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pin shard workers to CPU cores — pin_workers","text":"Invisibly, logical vector per worker indicating success.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pkg_available.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Package Availability — pkg_available","title":"Check Package Availability — pkg_available","text":"Check Package Availability","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pkg_available.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Package Availability — pkg_available","text":"","code":"pkg_available(pkg)"},{"path":"https://bbuchsbaum.github.io/shard/reference/pkg_available.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Package Availability — pkg_available","text":"pkg Package name.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pkg_available.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Package Availability — pkg_available","text":"Logical. TRUE package available.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool.html","id":null,"dir":"Reference","previous_headings":"","what":"Worker Pool Management — pool","title":"Worker Pool Management — pool","text":"Spawn supervise persistent R worker processes RSS monitoring.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_create.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Worker Pool — pool_create","title":"Create a Worker Pool — pool_create","text":"Spawns N R worker processes persist across multiple shard_map() calls. Workers supervised recycled RSS drift exceeds thresholds.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_create.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Worker Pool — pool_create","text":"","code":"pool_create(   n = parallel::detectCores() - 1L,   rss_limit = \"2GB\",   rss_drift_threshold = 0.5,   heartbeat_interval = 5,   min_recycle_interval = 1,   init_expr = NULL,   packages = NULL )"},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_create.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Worker Pool — pool_create","text":"n Integer. Number worker processes spawn. rss_limit Numeric character. Maximum RSS per worker recycling. Can bytes (numeric) human-readable (e.g., \"2GB\"). Default \"2GB\". rss_drift_threshold Numeric. Fraction RSS increase baseline triggers recycling (default 0.5 = 50% growth). heartbeat_interval Numeric. Seconds health checks (default 5). min_recycle_interval Numeric. Minimum time seconds recycling worker (default 1.0). prevents thrashing PSOCK worker creation extremely tight RSS limits. init_expr Expression evaluate worker startup. packages Character vector. Packages load workers.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_create.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Worker Pool — pool_create","text":"shard_pool object (invisibly). pool also stored package environment reuse.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_dispatch.html","id":null,"dir":"Reference","previous_headings":"","what":"Dispatch Task to Worker — pool_dispatch","title":"Dispatch Task to Worker — pool_dispatch","text":"Sends task specific worker waits result.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_dispatch.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Dispatch Task to Worker — pool_dispatch","text":"","code":"pool_dispatch(   worker_id,   expr,   envir = parent.frame(),   pool = NULL,   timeout = 3600 )"},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_dispatch.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Dispatch Task to Worker — pool_dispatch","text":"worker_id Integer. Worker dispatch . expr Expression evaluate. envir Environment containing variables needed expr. pool shard_pool object. NULL, uses current pool. timeout Numeric. Seconds wait result (default 3600).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_dispatch.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Dispatch Task to Worker — pool_dispatch","text":"result evaluating expr worker.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_get.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the Current Worker Pool — pool_get","title":"Get the Current Worker Pool — pool_get","text":"Returns active worker pool, NULL none exists.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_get.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the Current Worker Pool — pool_get","text":"","code":"pool_get()"},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_get.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the Current Worker Pool — pool_get","text":"shard_pool object NULL.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_health_check.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Pool Health — pool_health_check","title":"Check Pool Health — pool_health_check","text":"Monitors workers, recycling excessive RSS drift died.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_health_check.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Pool Health — pool_health_check","text":"","code":"pool_health_check(pool = NULL, busy_workers = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_health_check.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Pool Health — pool_health_check","text":"pool shard_pool object. NULL, uses current pool. busy_workers Optional integer vector worker ids currently running tasks (used internally dispatcher avoid recycling worker result flight).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_health_check.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Pool Health — pool_health_check","text":"list health status per worker actions taken.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_lapply.html","id":null,"dir":"Reference","previous_headings":"","what":"Parallel Dispatch with Async Workers — pool_lapply","title":"Parallel Dispatch with Async Workers — pool_lapply","text":"alternative dispatch uses parallel::parLapply-style execution supervision. simpler interface basic parallel apply.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_lapply.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parallel Dispatch with Async Workers — pool_lapply","text":"","code":"pool_lapply(X, FUN, ..., pool = NULL, chunk_size = 1L)"},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_lapply.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parallel Dispatch with Async Workers — pool_lapply","text":"X List vector iterate . FUN Function apply element. ... Additional arguments FUN. pool shard_pool object. NULL, uses current pool. chunk_size Integer. Elements per chunk (default 1).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_lapply.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parallel Dispatch with Async Workers — pool_lapply","text":"list results.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_sapply.html","id":null,"dir":"Reference","previous_headings":"","what":"Parallel sapply with Supervision — pool_sapply","title":"Parallel sapply with Supervision — pool_sapply","text":"Parallel sapply Supervision","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_sapply.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parallel sapply with Supervision — pool_sapply","text":"","code":"pool_sapply(X, FUN, ..., simplify = TRUE, pool = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_sapply.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parallel sapply with Supervision — pool_sapply","text":"X List vector iterate . FUN Function apply. ... Additional arguments FUN. simplify Logical. Simplify result vector/matrix? pool shard_pool object. NULL, uses current pool.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_sapply.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parallel sapply with Supervision — pool_sapply","text":"Simplified result possible, otherwise list.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Pool Status — pool_status","title":"Get Pool Status — pool_status","text":"Returns current status workers pool.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Pool Status — pool_status","text":"","code":"pool_status(pool = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Pool Status — pool_status","text":"pool shard_pool object. NULL, uses current pool.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Pool Status — pool_status","text":"data frame worker status information.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_stop.html","id":null,"dir":"Reference","previous_headings":"","what":"Stop the Worker Pool — pool_stop","title":"Stop the Worker Pool — pool_stop","text":"Terminates worker processes releases resources. Waits workers actually terminate returning.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_stop.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stop the Worker Pool — pool_stop","text":"","code":"pool_stop(pool = NULL, timeout = 5)"},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_stop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stop the Worker Pool — pool_stop","text":"pool shard_pool object. NULL, uses current pool. timeout Numeric. Seconds wait workers terminate (default 5). Returns timeout even workers still alive.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/pool_stop.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stop the Worker Pool — pool_stop","text":"NULL (invisibly).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_copy_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Copy Report — print_copy_report","title":"Print Copy Report — print_copy_report","text":"Print Copy Report","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_copy_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Copy Report — print_copy_report","text":"","code":"print_copy_report(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/print_copy_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Copy Report — print_copy_report","text":"x shard_report object type \"copy\".","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_cow_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Print COW Report — print_cow_report","title":"Print COW Report — print_cow_report","text":"Print COW Report","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_cow_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print COW Report — print_cow_report","text":"","code":"print_cow_report(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/print_cow_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print COW Report — print_cow_report","text":"x shard_report object type \"cow\".","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_main_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Main Report — print_main_report","title":"Print Main Report — print_main_report","text":"Print Main Report","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_main_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Main Report — print_main_report","text":"","code":"print_main_report(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/print_main_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Main Report — print_main_report","text":"x shard_report object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_mem_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Memory Report — print_mem_report","title":"Print Memory Report — print_mem_report","text":"Print Memory Report","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_mem_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Memory Report — print_mem_report","text":"","code":"print_mem_report(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/print_mem_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Memory Report — print_mem_report","text":"x shard_report object type \"memory\".","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_segment_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Segment Report — print_segment_report","title":"Print Segment Report — print_segment_report","text":"Print Segment Report","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_segment_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Segment Report — print_segment_report","text":"","code":"print_segment_report(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/print_segment_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Segment Report — print_segment_report","text":"x shard_report object type \"segment\".","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_task_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Print Task Report — print_task_report","title":"Print Task Report — print_task_report","text":"Print Task Report","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/print_task_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print Task Report — print_task_report","text":"","code":"print_task_report(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/print_task_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print Task Report — print_task_report","text":"x shard_report object type \"task\".","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue.html","id":null,"dir":"Reference","previous_headings":"","what":"Chunk Queue Management — queue","title":"Chunk Queue Management — queue","text":"Queue management dispatching chunks workers requeue support.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_complete.html","id":null,"dir":"Reference","previous_headings":"","what":"Mark Chunk as Completed — queue_complete","title":"Mark Chunk as Completed — queue_complete","text":"Mark Chunk Completed","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_complete.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mark Chunk as Completed — queue_complete","text":"","code":"queue_complete(queue, chunk_id, result = NULL, retain = TRUE)"},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_complete.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mark Chunk as Completed — queue_complete","text":"queue shard_queue object. chunk_id Chunk identifier. result result processing.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_complete.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mark Chunk as Completed — queue_complete","text":"NULL (invisibly).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_create.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a Chunk Queue — queue_create","title":"Create a Chunk Queue — queue_create","text":"Creates queue managing chunk dispatch support requeuing failed chunks workers die recycled.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_create.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a Chunk Queue — queue_create","text":"","code":"queue_create(chunks)"},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_create.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a Chunk Queue — queue_create","text":"chunks List chunk descriptors. chunk id field.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_create.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a Chunk Queue — queue_create","text":"shard_queue object queue management methods.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_fail.html","id":null,"dir":"Reference","previous_headings":"","what":"Mark Chunk as Failed — queue_fail","title":"Mark Chunk as Failed — queue_fail","text":"Mark Chunk Failed","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_fail.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mark Chunk as Failed — queue_fail","text":"","code":"queue_fail(queue, chunk_id, error = NULL, requeue = TRUE)"},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_fail.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mark Chunk as Failed — queue_fail","text":"queue shard_queue object. chunk_id Chunk identifier. error error occurred. requeue Logical. Whether requeue retry.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_fail.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mark Chunk as Failed — queue_fail","text":"NULL (invisibly).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_failures.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Failed Chunks — queue_failures","title":"Get Failed Chunks — queue_failures","text":"Get Failed Chunks","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_failures.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Failed Chunks — queue_failures","text":"","code":"queue_failures(queue)"},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_failures.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Failed Chunks — queue_failures","text":"queue shard_queue object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_failures.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Failed Chunks — queue_failures","text":"List failed chunk descriptors.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_has_pending.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if Queue Has Work — queue_has_pending","title":"Check if Queue Has Work — queue_has_pending","text":"Check Queue Work","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_has_pending.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if Queue Has Work — queue_has_pending","text":"","code":"queue_has_pending(queue)"},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_has_pending.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if Queue Has Work — queue_has_pending","text":"queue shard_queue object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_has_pending.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if Queue Has Work — queue_has_pending","text":"Logical. TRUE pending chunks.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_is_done.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if Queue is Done — queue_is_done","title":"Check if Queue is Done — queue_is_done","text":"Check Queue Done","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_is_done.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if Queue is Done — queue_is_done","text":"","code":"queue_is_done(queue)"},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_is_done.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if Queue is Done — queue_is_done","text":"queue shard_queue object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_is_done.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if Queue is Done — queue_is_done","text":"Logical. TRUE chunks completed failed.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_next.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Next Chunk from Queue — queue_next","title":"Get Next Chunk from Queue — queue_next","text":"Get Next Chunk Queue","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_next.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Next Chunk from Queue — queue_next","text":"","code":"queue_next(queue, worker_id)"},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_next.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Next Chunk from Queue — queue_next","text":"queue shard_queue object. worker_id Worker requesting chunk.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_next.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Next Chunk from Queue — queue_next","text":"chunk descriptor NULL queue empty.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_requeue_worker.html","id":null,"dir":"Reference","previous_headings":"","what":"Requeue All Chunks for a Worker — queue_requeue_worker","title":"Requeue All Chunks for a Worker — queue_requeue_worker","text":"worker dies recycled, requeue -flight chunks.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_requeue_worker.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Requeue All Chunks for a Worker — queue_requeue_worker","text":"","code":"queue_requeue_worker(queue, worker_id)"},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_requeue_worker.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Requeue All Chunks for a Worker — queue_requeue_worker","text":"queue shard_queue object. worker_id Worker identifier.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_requeue_worker.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Requeue All Chunks for a Worker — queue_requeue_worker","text":"Integer. Number chunks requeued.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_results.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Queue Results — queue_results","title":"Get Queue Results — queue_results","text":"Get Queue Results","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_results.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Queue Results — queue_results","text":"","code":"queue_results(queue)"},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_results.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Queue Results — queue_results","text":"queue shard_queue object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_results.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Queue Results — queue_results","text":"List results completed chunks.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Queue Status — queue_status","title":"Get Queue Status — queue_status","text":"Get Queue Status","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Queue Status — queue_status","text":"","code":"queue_status(queue)"},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Queue Status — queue_status","text":"queue shard_queue object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/queue_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Queue Status — queue_status","text":"list queue statistics.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/recommendations.html","id":null,"dir":"Reference","previous_headings":"","what":"Performance Recommendations — recommendations","title":"Performance Recommendations — recommendations","text":"Uses run telemetry (copy/materialization stats, packing volume, buffer/table writes, scratch pool stats) produce actionable recommendations.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/recommendations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Performance Recommendations — recommendations","text":"","code":"recommendations(result)"},{"path":"https://bbuchsbaum.github.io/shard/reference/recommendations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Performance Recommendations — recommendations","text":"result shard_result shard_map().","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/recommendations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Performance Recommendations — recommendations","text":"character vector recommendations (possibly empty).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/register_kernel.html","id":null,"dir":"Reference","previous_headings":"","what":"Register a shard kernel — register_kernel","title":"Register a shard kernel — register_kernel","text":"Registers named kernel implementation can selected shard_map(..., kernel = \"name\").","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/register_kernel.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Register a shard kernel — register_kernel","text":"","code":"register_kernel(   name,   impl,   signature = NULL,   footprint = NULL,   supports_views = TRUE,   description = NULL )"},{"path":"https://bbuchsbaum.github.io/shard/reference/register_kernel.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Register a shard kernel — register_kernel","text":"name Kernel name (string). impl Function implementing kernel. must accept shard descriptor first argument. signature Optional short signature string documentation. footprint Optional footprint hint. Either constant (bytes) function (shard, ...) -> list(class='tiny'|'medium'|'huge', bytes=...). supports_views Logical. Whether kernel intended operate shard views without slice materialization. description Optional human-readable description.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/register_kernel.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Register a shard kernel — register_kernel","text":"Invisibly, registered kernel metadata.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/register_kernel.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Register a shard kernel — register_kernel","text":"\"kernel\" just function shard_map can call shard. registry lets shard_map attach additional metadata (footprint hints, supports_views) scheduling/autotuning.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/report.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Shard Runtime Report — report","title":"Generate Shard Runtime Report — report","text":"Primary entry point shard diagnostics. Generates comprehensive report current runtime state including pool status, memory usage, execution statistics.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Shard Runtime Report — report","text":"","code":"report(level = c(\"summary\", \"workers\", \"tasks\", \"segments\"), result = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Shard Runtime Report — report","text":"level Character. Detail level report: \"summary\": High-level overview (default) \"workers\": Include per-worker details \"tasks\": Include task execution history \"segments\": Include shared memory segment details result Optional. shard_result object shard_map include execution diagnostics .","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Shard Runtime Report — report","text":"S3 object class shard_report containing: level: requested detail level timestamp: report generated pool: Pool status information (pool exists) memory: Memory usage summary workers: Per-worker details (level includes workers) tasks: Task execution details (level includes tasks) segments: Segment details (level includes segments) result_diagnostics: Diagnostics shard_result (provided)","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Shard Runtime Report — report","text":"","code":"if (FALSE) { # \\dontrun{ # Basic summary report()  # Include worker details report(\"workers\")  # Full report with task and segment details report(\"segments\")  # Include diagnostics from a shard_map result result <- shard_map(shards(100), function(s) sum(s$idx)) report(\"tasks\", result = result) } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/results.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Results from shard_map — results","title":"Extract Results from shard_map — results","text":"Extract Results shard_map","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/results.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Results from shard_map — results","text":"","code":"results(x, flatten = TRUE)"},{"path":"https://bbuchsbaum.github.io/shard/reference/results.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Results from shard_map — results","text":"x shard_result object. flatten Logical. Flatten nested results?","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/results.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Results from shard_map — results","text":"List vector results.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/retry_with_backoff.html","id":null,"dir":"Reference","previous_headings":"","what":"Retry with Backoff — retry_with_backoff","title":"Retry with Backoff — retry_with_backoff","text":"Retries function call exponential backoff.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/retry_with_backoff.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Retry with Backoff — retry_with_backoff","text":"","code":"retry_with_backoff(   f,   max_attempts = 3,   initial_delay = 0.1,   max_delay = 5,   on_error = NULL )"},{"path":"https://bbuchsbaum.github.io/shard/reference/retry_with_backoff.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Retry with Backoff — retry_with_backoff","text":"f Function call. max_attempts Integer. Maximum retry attempts. initial_delay Numeric. Initial delay seconds. max_delay Numeric. Maximum delay seconds. on_error Function. Called error (attempt, error).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/retry_with_backoff.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Retry with Backoff — retry_with_backoff","text":"Result f() error final failure.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/row_layout.html","id":null,"dir":"Reference","previous_headings":"","what":"Row layout for fixed-row table outputs — row_layout","title":"Row layout for fixed-row table outputs — row_layout","text":"Computes disjoint row ranges shard via prefix-sum, enabling lock-free writes shard writes unique region.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/row_layout.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Row layout for fixed-row table outputs — row_layout","text":"","code":"row_layout(shards, rows_per_shard)"},{"path":"https://bbuchsbaum.github.io/shard/reference/row_layout.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Row layout for fixed-row table outputs — row_layout","text":"shards shard_descriptor. rows_per_shard Either scalar integer function(shard)->integer.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/row_layout.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Row layout for fixed-row table outputs — row_layout","text":"list mapping shard id (character) idx_range(start,end).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss.html","id":null,"dir":"Reference","previous_headings":"","what":"RSS Monitoring Utilities — rss","title":"RSS Monitoring Utilities — rss","text":"Cross-platform utilities monitoring process memory usage.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_get_pid.html","id":null,"dir":"Reference","previous_headings":"","what":"Get RSS for a Process ID — rss_get_pid","title":"Get RSS for a Process ID — rss_get_pid","text":"Retrieves Resident Set Size (RSS) process using best available method current platform.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_get_pid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get RSS for a Process ID — rss_get_pid","text":"","code":"rss_get_pid(pid)"},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_get_pid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get RSS for a Process ID — rss_get_pid","text":"pid Integer. Process ID query.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_get_pid.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get RSS for a Process ID — rss_get_pid","text":"Numeric. RSS bytes, NA unavailable.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_monitor.html","id":null,"dir":"Reference","previous_headings":"","what":"Monitor RSS Over Time — rss_monitor","title":"Monitor RSS Over Time — rss_monitor","text":"Creates closure records RSS samples timestamps.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_monitor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Monitor RSS Over Time — rss_monitor","text":"","code":"rss_monitor(pid)"},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_monitor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Monitor RSS Over Time — rss_monitor","text":"pid Process ID monitor.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_monitor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Monitor RSS Over Time — rss_monitor","text":"list sample() history() functions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_self.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Current Process RSS — rss_self","title":"Get Current Process RSS — rss_self","text":"Get Current Process RSS","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_self.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Current Process RSS — rss_self","text":"","code":"rss_self()"},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_self.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Current Process RSS — rss_self","text":"RSS bytes current R process.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_proc.html","id":null,"dir":"Reference","previous_headings":"","what":"Get RSS via /proc filesystem (Linux) — rss_via_proc","title":"Get RSS via /proc filesystem (Linux) — rss_via_proc","text":"Get RSS via /proc filesystem (Linux)","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_proc.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get RSS via /proc filesystem (Linux) — rss_via_proc","text":"","code":"rss_via_proc(pid)"},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_proc.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get RSS via /proc filesystem (Linux) — rss_via_proc","text":"pid Process ID.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_proc.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get RSS via /proc filesystem (Linux) — rss_via_proc","text":"RSS bytes NA.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_ps.html","id":null,"dir":"Reference","previous_headings":"","what":"Get RSS via ps Package — rss_via_ps","title":"Get RSS via ps Package — rss_via_ps","text":"Get RSS via ps Package","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_ps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get RSS via ps Package — rss_via_ps","text":"","code":"rss_via_ps(pid)"},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_ps.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get RSS via ps Package — rss_via_ps","text":"pid Process ID.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_ps.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get RSS via ps Package — rss_via_ps","text":"RSS bytes NA.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_ps_cmd.html","id":null,"dir":"Reference","previous_headings":"","what":"Get RSS via ps Command (Unix) — rss_via_ps_cmd","title":"Get RSS via ps Command (Unix) — rss_via_ps_cmd","text":"Get RSS via ps Command (Unix)","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_ps_cmd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get RSS via ps Command (Unix) — rss_via_ps_cmd","text":"","code":"rss_via_ps_cmd(pid)"},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_ps_cmd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get RSS via ps Command (Unix) — rss_via_ps_cmd","text":"pid Process ID.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_ps_cmd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get RSS via ps Command (Unix) — rss_via_ps_cmd","text":"RSS bytes NA.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_wmic.html","id":null,"dir":"Reference","previous_headings":"","what":"Get RSS via WMIC (Windows) — rss_via_wmic","title":"Get RSS via WMIC (Windows) — rss_via_wmic","text":"Get RSS via WMIC (Windows)","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_wmic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get RSS via WMIC (Windows) — rss_via_wmic","text":"","code":"rss_via_wmic(pid)"},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_wmic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get RSS via WMIC (Windows) — rss_via_wmic","text":"pid Process ID.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/rss_via_wmic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get RSS via WMIC (Windows) — rss_via_wmic","text":"RSS bytes NA.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/safe_div.html","id":null,"dir":"Reference","previous_headings":"","what":"Safe Divide — safe_div","title":"Safe Divide — safe_div","text":"Division returns NA instead Inf/NaN zero divisors.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/safe_div.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Safe Divide — safe_div","text":"","code":"safe_div(x, y)"},{"path":"https://bbuchsbaum.github.io/shard/reference/safe_div.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Safe Divide — safe_div","text":"x Numerator. y Denominator.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/safe_div.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Safe Divide — safe_div","text":"x/y NA y zero.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/schema.html","id":null,"dir":"Reference","previous_headings":"","what":"Define a table schema — schema","title":"Define a table schema — schema","text":"schema named set columns explicit types. used allocate table buffers validate writes.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/schema.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Define a table schema — schema","text":"","code":"schema(...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/schema.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Define a table schema — schema","text":"... Named columns type specs (e.g., int32(), float64()).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/schema.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Define a table schema — schema","text":"shard_schema.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/scratch_diagnostics.html","id":null,"dir":"Reference","previous_headings":"","what":"Scratch pool diagnostics — scratch_diagnostics","title":"Scratch pool diagnostics — scratch_diagnostics","text":"Scratch pool diagnostics","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/scratch_diagnostics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scratch pool diagnostics — scratch_diagnostics","text":"","code":"scratch_diagnostics()"},{"path":"https://bbuchsbaum.github.io/shard/reference/scratch_diagnostics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scratch pool diagnostics — scratch_diagnostics","text":"list counters current pool bytes.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/scratch_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Get a scratch matrix — scratch_matrix","title":"Get a scratch matrix — scratch_matrix","text":"Allocates (reuses) double matrix worker scratch pool.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/scratch_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get a scratch matrix — scratch_matrix","text":"","code":"scratch_matrix(nrow, ncol, key = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/scratch_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get a scratch matrix — scratch_matrix","text":"nrow, ncol Dimensions. key Optional key control reuse. Defaults shape-derived key.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/scratch_pool_config.html","id":null,"dir":"Reference","previous_headings":"","what":"Configure scratch pool limits — scratch_pool_config","title":"Configure scratch pool limits — scratch_pool_config","text":"Configure scratch pool limits","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/scratch_pool_config.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Configure scratch pool limits — scratch_pool_config","text":"","code":"scratch_pool_config(max_bytes = Inf)"},{"path":"https://bbuchsbaum.github.io/shard/reference/scratch_pool_config.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Configure scratch pool limits — scratch_pool_config","text":"max_bytes Maximum scratch pool bytes allowed worker. exceeded, worker flagged recycle next safe point.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment.html","id":null,"dir":"Reference","previous_headings":"","what":"Shared Memory Segment — segment","title":"Shared Memory Segment — segment","text":"Low-level shared memory segment operations cross-process data sharing. functions provide foundation higher-level share() buffer() APIs.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Shared Memory Segment — segment","text":"Segments can backed : \"shm\": POSIX shared memory (Linux/macOS) named file mapping (Windows). Faster may size limitations. \"mmap\": File-backed memory mapping. Works platforms supports larger sizes. \"auto\": Let system choose best option. segments created secure permissions (0600 Unix) automatically cleaned R object garbage collected.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_advise.html","id":null,"dir":"Reference","previous_headings":"","what":"Advise OS about expected access pattern for a segment — segment_advise","title":"Advise OS about expected access pattern for a segment — segment_advise","text":"calls madvise() segment mapping available.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_advise.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Advise OS about expected access pattern for a segment — segment_advise","text":"","code":"segment_advise(   seg,   advice = c(\"normal\", \"sequential\", \"random\", \"willneed\", \"dontneed\") )"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_advise.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Advise OS about expected access pattern for a segment — segment_advise","text":"seg shard_segment. advice One \"normal\", \"sequential\", \"random\", \"willneed\", \"dontneed\".","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_advise.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Advise OS about expected access pattern for a segment — segment_advise","text":"Logical; TRUE OS accepted hint.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_close.html","id":null,"dir":"Reference","previous_headings":"","what":"Close a shared memory segment — segment_close","title":"Close a shared memory segment — segment_close","text":"Close shared memory segment","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_close.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Close a shared memory segment — segment_close","text":"","code":"segment_close(x, unlink = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_close.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Close a shared memory segment — segment_close","text":"x shard_segment object unlink Whether unlink underlying file/shm (default: FALSE opened segments, TRUE owned segments)","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_close.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Close a shared memory segment — segment_close","text":"NULL (invisibly)","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_create.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a new shared memory segment — segment_create","title":"Create a new shared memory segment — segment_create","text":"Create new shared memory segment","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_create.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a new shared memory segment — segment_create","text":"","code":"segment_create(   size,   backing = c(\"auto\", \"mmap\", \"shm\"),   path = NULL,   readonly = FALSE )"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_create.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a new shared memory segment — segment_create","text":"size Size segment bytes backing Backing type: \"auto\", \"mmap\", \"shm\" path Optional file path mmap backing (NULL temp file) readonly Create read-(initial write)","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_create.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a new shared memory segment — segment_create","text":"S3 object class \"shard_segment\"","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_create.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a new shared memory segment — segment_create","text":"","code":"if (FALSE) { # \\dontrun{ # Create a 1MB segment seg <- segment_create(1024 * 1024) segment_info(seg) segment_close(seg) } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Get segment information — segment_info","title":"Get segment information — segment_info","text":"Get segment information","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get segment information — segment_info","text":"","code":"segment_info(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get segment information — segment_info","text":"x shard_segment object","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get segment information — segment_info","text":"list segment properties","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_open.html","id":null,"dir":"Reference","previous_headings":"","what":"Open an existing shared memory segment — segment_open","title":"Open an existing shared memory segment — segment_open","text":"Open existing shared memory segment","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_open.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Open an existing shared memory segment — segment_open","text":"","code":"segment_open(path, backing = c(\"mmap\", \"shm\"), readonly = TRUE)"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_open.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Open an existing shared memory segment — segment_open","text":"path Path shm name segment backing Backing type: \"mmap\" \"shm\" readonly Open read-","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_open.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Open an existing shared memory segment — segment_open","text":"S3 object class \"shard_segment\"","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_path.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the path or name of a segment — segment_path","title":"Get the path or name of a segment — segment_path","text":"Get path name segment","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_path.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the path or name of a segment — segment_path","text":"","code":"segment_path(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_path.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the path or name of a segment — segment_path","text":"x shard_segment object","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_path.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the path or name of a segment — segment_path","text":"path string, NULL anonymous segments","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_protect.html","id":null,"dir":"Reference","previous_headings":"","what":"Make a segment read-only — segment_protect","title":"Make a segment read-only — segment_protect","text":"Make segment read-","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_protect.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make a segment read-only — segment_protect","text":"","code":"segment_protect(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_protect.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make a segment read-only — segment_protect","text":"x shard_segment object","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_protect.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make a segment read-only — segment_protect","text":"segment object (invisibly)","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_read.html","id":null,"dir":"Reference","previous_headings":"","what":"Read raw data from a segment — segment_read","title":"Read raw data from a segment — segment_read","text":"Read raw data segment","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_read.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read raw data from a segment — segment_read","text":"","code":"segment_read(x, offset = 0, size = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_read.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read raw data from a segment — segment_read","text":"x shard_segment object offset Byte offset start reading (0-based) size Number bytes read","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_read.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read raw data from a segment — segment_read","text":"raw vector","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Shared Memory Segment Report — segment_report","title":"Shared Memory Segment Report — segment_report","text":"Generates report active shared memory segments current session.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shared Memory Segment Report — segment_report","text":"","code":"segment_report()"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Shared Memory Segment Report — segment_report","text":"S3 object class shard_report type \"segment\" containing: type: \"segment\" timestamp: report generated n_segments: Number tracked segments total_bytes: Total bytes across segments segments: List segment details","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_report.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Shared Memory Segment Report — segment_report","text":"function reports segments currently accessible. Note segments automatically cleaned R objects garbage collected, shows segments live references.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Shared Memory Segment Report — segment_report","text":"","code":"if (FALSE) { # \\dontrun{ # Create some segments seg1 <- segment_create(1024) seg2 <- segment_create(2048) shared <- share(1:1000)  segment_report() } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_size.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the size of a segment — segment_size","title":"Get the size of a segment — segment_size","text":"Get size segment","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_size.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the size of a segment — segment_size","text":"","code":"segment_size(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_size.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the size of a segment — segment_size","text":"x shard_segment object","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_size.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the size of a segment — segment_size","text":"Size bytes","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_write.html","id":null,"dir":"Reference","previous_headings":"","what":"Write data to a segment — segment_write","title":"Write data to a segment — segment_write","text":"Write data segment","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_write.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write data to a segment — segment_write","text":"","code":"segment_write(x, data, offset = 0)"},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_write.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write data to a segment — segment_write","text":"x shard_segment object data Data write (raw, numeric, integer, logical vector) offset Byte offset start writing (0-based)","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/segment_write.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write data to a segment — segment_write","text":"Number bytes written (invisibly)","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/set_affinity.html","id":null,"dir":"Reference","previous_headings":"","what":"Set CPU affinity for the current process — set_affinity","title":"Set CPU affinity for the current process — set_affinity","text":"Intended called inside worker process (e.g., via clusterCall()). unsupported platforms, returns FALSE.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/set_affinity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set CPU affinity for the current process — set_affinity","text":"","code":"set_affinity(cores)"},{"path":"https://bbuchsbaum.github.io/shard/reference/set_affinity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set CPU affinity for the current process — set_affinity","text":"cores Integer vector 0-based CPU core ids.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/set_affinity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set CPU affinity for the current process — set_affinity","text":"Logical; TRUE success.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/set_worker_seeds.html","id":null,"dir":"Reference","previous_headings":"","what":"Set Worker Seeds — set_worker_seeds","title":"Set Worker Seeds — set_worker_seeds","text":"Sets reproducible RNG seeds workers.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/set_worker_seeds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set Worker Seeds — set_worker_seeds","text":"","code":"set_worker_seeds(pool, seed, num_shards)"},{"path":"https://bbuchsbaum.github.io/shard/reference/set_worker_seeds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set Worker Seeds — set_worker_seeds","text":"pool Worker pool. seed Base seed. num_shards Number shards substream calculation.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard-package.html","id":null,"dir":"Reference","previous_headings":"","what":"shard: Deterministic, Zero-Copy Parallel Execution for R — shard-package","title":"shard: Deterministic, Zero-Copy Parallel Execution for R — shard-package","text":"Provides parallel execution runtime R emphasizes deterministic memory behavior efficient handling large shared inputs. 'shard' enables zero-copy parallel reads via shared/memory-mapped segments, encourages explicit output buffers avoid large result aggregation, supervises worker processes mitigate memory drift via controlled recycling. Diagnostics report peak memory usage, end--run memory return, hidden copy/materialization events support reproducible performance benchmarking. shard package provides parallel execution runtime emphasizes deterministic memory behavior efficient handling large shared inputs.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard-package.html","id":"core-api","dir":"Reference","previous_headings":"","what":"Core API","title":"shard: Deterministic, Zero-Copy Parallel Execution for R — shard-package","text":"shard_map() - Primary parallel execution entry point shards() - Create shard descriptors autotuning results() - Extract results shard_map run succeeded() - Check shard_map completed without failures","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard-package.html","id":"zero-copy-shared-data","dir":"Reference","previous_headings":"","what":"Zero-Copy Shared Data","title":"shard: Deterministic, Zero-Copy Parallel Execution for R — shard-package","text":"share() - Share R object parallel access fetch() - Retrieve data shared object materialize() - Alias fetch() is_shared() - Check object shared shared_info() - Get information shared object","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard-package.html","id":"output-buffers","dir":"Reference","previous_headings":"","what":"Output Buffers","title":"shard: Deterministic, Zero-Copy Parallel Execution for R — shard-package","text":"buffer() - Create typed writable output buffer buffer_open() - Open existing buffer another process buffer_path() - Get buffer path cross-process sharing buffer_info() - Get buffer information buffer_close() - Close release buffer","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard-package.html","id":"worker-pool-management","dir":"Reference","previous_headings":"","what":"Worker Pool Management","title":"shard: Deterministic, Zero-Copy Parallel Execution for R — shard-package","text":"pool_create() - Create supervised worker pool pool_stop() - Stop worker pool pool_status() - Check worker status RSS pool_health_check() - Monitor recycle workers","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard-package.html","id":"task-dispatch","dir":"Reference","previous_headings":"","what":"Task Dispatch","title":"shard: Deterministic, Zero-Copy Parallel Execution for R — shard-package","text":"dispatch_chunks() - Execute chunks supervision pool_lapply() - Parallel lapply supervision pool_sapply() - Parallel sapply supervision","code":""},{"path":[]},{"path":"https://bbuchsbaum.github.io/shard/reference/shard-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"shard: Deterministic, Zero-Copy Parallel Execution for R — shard-package","text":"Maintainer: Bradley Buchsbaum brad.buchsbaum@gmail.com","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_apply_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply a Function Over Matrix Columns with Shared Inputs — shard_apply_matrix","title":"Apply a Function Over Matrix Columns with Shared Inputs — shard_apply_matrix","text":"convenience wrapper common \"per-column apply\" pattern. matrix shared worker receives zero-copy column view possible.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_apply_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply a Function Over Matrix Columns with Shared Inputs — shard_apply_matrix","text":"","code":"shard_apply_matrix(   X,   MARGIN = 2,   FUN,   VARS = NULL,   workers = NULL,   ...,   policy = shard_apply_policy() )"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_apply_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply a Function Over Matrix Columns with Shared Inputs — shard_apply_matrix","text":"X numeric/integer/logical matrix (shared matrix created share()). MARGIN Must 2 (columns). FUN Function form function(v, ...) returning scalar atomic. VARS Optional named list extra variables. Large atomic VARS auto-shared based policy$auto_share_min_bytes. workers Number workers (passed shard_map()). ... Additional arguments forwarded FUN. policy shard_apply_policy() object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_apply_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply a Function Over Matrix Columns with Shared Inputs — shard_apply_matrix","text":"atomic vector length ncol(X) results.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_apply_matrix.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply a Function Over Matrix Columns with Shared Inputs — shard_apply_matrix","text":"Current limitation: MARGIN must 2 (columns). Row-wise apply require strided/gather slicing intentionally explicit shard via views/kernels.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_apply_policy.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply Wrapper Policy — shard_apply_policy","title":"Apply Wrapper Policy — shard_apply_policy","text":"Centralizes safe defaults guardrails apply/lapply convenience wrappers.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_apply_policy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply Wrapper Policy — shard_apply_policy","text":"","code":"shard_apply_policy(   auto_share_min_bytes = \"1MB\",   max_gather_bytes = \"256MB\",   cow = c(\"deny\", \"audit\", \"allow\"),   profile = c(\"default\", \"memory\", \"speed\"),   block_size = \"auto\",   backing = c(\"auto\", \"mmap\", \"shm\") )"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_apply_policy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply Wrapper Policy — shard_apply_policy","text":"auto_share_min_bytes Minimum object size auto-sharing (default \"1MB\"). max_gather_bytes Maximum estimated gathered result bytes refusing run (default \"256MB\"). cow Copy--write policy borrowed inputs. One \"deny\", \"audit\", \"allow\". Default \"deny\". profile Execution profile passed shard_map(). One \"default\", \"memory\", \"speed\". Default \"default\". block_size Shard block size apply-style workloads. Default \"auto\". backing Backing type used auto-sharing (\"auto\", \"mmap\", \"shm\").","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_apply_policy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply Wrapper Policy — shard_apply_policy","text":"object class shard_apply_policy.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_clear_adapters.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear All Registered Adapters — shard_clear_adapters","title":"Clear All Registered Adapters — shard_clear_adapters","text":"Removes registered adapters. Primarily useful testing.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_clear_adapters.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear All Registered Adapters — shard_clear_adapters","text":"","code":"shard_clear_adapters()"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_clear_adapters.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clear All Registered Adapters — shard_clear_adapters","text":"Invisibly returns number adapters cleared.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_crossprod.html","id":null,"dir":"Reference","previous_headings":"","what":"Parallel crossprod() using shard views + output buffers — shard_crossprod","title":"Parallel crossprod() using shard views + output buffers — shard_crossprod","text":"Computes crossprod(X, Y) (.e. t(X) %*% Y) using: shared/mmap-backed inputs (one copy), block views (slice materialization), BLAS-3 dgemm tile, explicit shared output buffer (gather/bind spikes).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_crossprod.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parallel crossprod() using shard views + output buffers — shard_crossprod","text":"","code":"shard_crossprod(   X,   Y,   workers = NULL,   block_x = \"auto\",   block_y = \"auto\",   backing = c(\"mmap\", \"shm\"),   materialize = c(\"auto\", \"never\", \"always\"),   materialize_max_bytes = 512 * 1024^2,   diagnostics = TRUE )"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_crossprod.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parallel crossprod() using shard views + output buffers — shard_crossprod","text":"X, Y Double matrices number rows. workers Number worker processes. block_x, block_y Tile sizes ncol(X) ncol(Y). Use \"auto\" (default) autotune current machine. backing Backing shared inputs output buffer (\"mmap\" \"shm\"). materialize Whether return result standard R matrix: \"never\" (return buffer handle), \"always\", \"auto\" (materialize estimated output size materialize_max_bytes). materialize_max_bytes Threshold \"auto\" materialization. diagnostics Whether collect shard_map diagnostics.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_crossprod.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parallel crossprod() using shard views + output buffers — shard_crossprod","text":"list : buffer: shard_buffer result (p x v) value: materialized matrix requested, otherwise NULL run: underlying shard_result shard_map tile: chosen tile sizes","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_crossprod.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Parallel crossprod() using shard views + output buffers — shard_crossprod","text":"intended ergonomic entry point \"wow\" path: users manually call share(), view_block(), buffer(), tiles2d(), shard_map() common patterns.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_get_adapter.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Adapter for an Object — shard_get_adapter","title":"Get Adapter for an Object — shard_get_adapter","text":"Retrieves registered adapter object's class. Checks classes object's class hierarchy, returning first matching adapter.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_get_adapter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Adapter for an Object — shard_get_adapter","text":"","code":"shard_get_adapter(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_get_adapter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Adapter for an Object — shard_get_adapter","text":"x R object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_get_adapter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Adapter for an Object — shard_get_adapter","text":"adapter list one registered object's classes, NULL adapter registered.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_get_adapter.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Adapter for an Object — shard_get_adapter","text":"","code":"if (FALSE) { # \\dontrun{ # Check if an adapter is registered for an object adapter <- shard_get_adapter(my_object) if (!is.null(adapter)) {   children <- adapter$children(my_object) } } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_lapply_shared.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply a Function Over a List with Optional Auto-Sharing — shard_lapply_shared","title":"Apply a Function Over a List with Optional Auto-Sharing — shard_lapply_shared","text":"convenience wrapper list workloads need supervision shared inputs. Large atomic list elements auto-shared based policy.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_lapply_shared.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply a Function Over a List with Optional Auto-Sharing — shard_lapply_shared","text":"","code":"shard_lapply_shared(   x,   FUN,   VARS = NULL,   workers = NULL,   ...,   policy = shard_apply_policy() )"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_lapply_shared.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply a Function Over a List with Optional Auto-Sharing — shard_lapply_shared","text":"x list. FUN Function form function(el, ...). VARS Optional named list extra variables (auto-shared large). workers Number workers (passed shard_map()). ... Additional arguments forwarded FUN. policy shard_apply_policy() object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_lapply_shared.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply a Function Over a List with Optional Auto-Sharing — shard_lapply_shared","text":"list results length length(x).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_lapply_shared.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Apply a Function Over a List with Optional Auto-Sharing — shard_lapply_shared","text":"wrapper enforces guardrails avoid accidental huge gathers: estimates total gathered result size probe call refuses run exceeds policy$max_gather_bytes.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_list_adapters.html","id":null,"dir":"Reference","previous_headings":"","what":"List Registered Adapters — shard_list_adapters","title":"List Registered Adapters — shard_list_adapters","text":"Returns character vector classes registered adapters.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_list_adapters.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List Registered Adapters — shard_list_adapters","text":"","code":"shard_list_adapters()"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_list_adapters.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List Registered Adapters — shard_list_adapters","text":"Character vector class names registered adapters.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_list_adapters.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List Registered Adapters — shard_list_adapters","text":"","code":"shard_list_adapters() #> character(0)"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Parallel Execution with shard_map — shard_map","title":"Parallel Execution with shard_map — shard_map","text":"Core parallel execution engine supervision, shared inputs, output buffers. Executes function shards parallel worker supervision, shared inputs, explicit output buffers. primary entry point shard's parallel execution model.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parallel Execution with shard_map — shard_map","text":"","code":"shard_map(   shards,   fun = NULL,   borrow = list(),   out = list(),   kernel = NULL,   scheduler_policy = NULL,   autotune = NULL,   dispatch_mode = c(\"rpc_chunked\", \"shm_queue\"),   dispatch_opts = NULL,   workers = NULL,   chunk_size = 1L,   profile = c(\"default\", \"memory\", \"speed\"),   mem_cap = \"2GB\",   recycle = TRUE,   cow = c(\"deny\", \"audit\", \"allow\"),   seed = NULL,   diagnostics = TRUE,   packages = NULL,   init_expr = NULL,   timeout = 3600,   max_retries = 3L,   health_check_interval = 10L )"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_map.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parallel Execution with shard_map — shard_map","text":"shards shard_descriptor shards(), integer N auto-generate shards. fun Function execute per shard. Receives shard descriptor first argument, followed borrowed inputs outputs. can also select registered kernel via kernel= instead providing fun=. borrow Named list shared inputs. exported workers reused across shards. Treated read-default. Named list output buffers (buffer()). Workers write results directly buffers. kernel Optional. Name registered kernel (see list_kernels()). provided, fun must NULL. scheduler_policy Optional list scheduling hints (advanced). Currently: max_huge_concurrency: cap concurrent chunks whose kernel footprint classified \"huge\" (see register_kernel()). autotune Optional. Online autotuning scalar-N sharding (advanced). shards integer N, shard_map can adjust shard block sizes time based observed wall time worker RSS. Accepted values: NULL (default): enable online autotuning shard_map(N, ...), precomputed shard descriptors. TRUE / \"online\": force online autotuning (applies shards integer N). FALSE / \"none\": disable autotuning. list: list(mode=\"online\", max_rounds=..., probe_shards_per_worker=..., min_shard_time=...) dispatch_mode Dispatch mode (advanced). \"rpc_chunked\" default supervised socket-based dispatcher. \"shm_queue\" opt-fast mode uses shared-memory task queue reduce per-task overhead tiny tasks. v1, \"shm_queue\" supported shard_map(N, ...) chunk_size=1 intended -buffer/sink workflows (results gathered). dispatch_opts Optional list dispatch-mode specific knobs (advanced). Currently: dispatch_mode=\"rpc_chunked\": auto_table: logical. TRUE, shard_map treats data.frame/tibble return values row-group outputs writes table sink automatically (one partition per shard id). avoids building large list tibbles calling bind_rows() master. Requires = empty (use explicit =list(sink=table_sink(...)) otherwise). auto_table_materialize: \"never\", \"auto\", \"always\" (default \"auto\"). auto_table_max_bytes: numeric/integer. \"auto\", materialize estimated output size <= threshold (default 256MB). auto_table_mode: \"row_groups\" (default) \"partitioned\". auto_table_path: optional output directory (default tempdir()). auto_table_format: \"auto\", \"rds\" (default), \"native\". auto_table_schema: optional shard_schema validation/native encoding. dispatch_mode=\"shm_queue\": block_size: integer. provided, overrides default heuristic contiguous shard block sizing. queue_backing: one \"mmap\" \"shm\" (default \"mmap\"). error_log: logical. TRUE, workers write bounded per-worker error log disk aid debugging failed tasks (default FALSE). error_log_max_lines: integer. Maximum lines per worker error log (default 100). workers Integer. Number worker processes. NULL, uses existing pool creates one detectCores() - 1. chunk_size Integer. Shards batch per worker dispatch (default 1). Higher values reduce RPC overhead may hurt load balancing. profile Execution profile: \"default\", \"memory\" (aggressive recycling), \"speed\" (minimal overhead). profile=\"speed\", shard_map automatically enable dispatch_mode=\"shm_queue\" possible shard_map(N, ...) -buffer workflows (scalar N, chunk_size=1), unless dispatch_mode explicitly specified. mem_cap Memory cap per worker (e.g., \"2GB\"). Workers exceeding recycled. recycle Logical numeric. TRUE, recycle workers RSS drift. numeric, specifies drift threshold (default 0.5 = 50% growth). cow Copy--write policy borrowed inputs: \"deny\" (error mutation), \"audit\" (detect flag), \"allow\" (permit tracking). seed Integer. RNG seed reproducibility. NULL, seed set. diagnostics Logical. Collect detailed diagnostics (default TRUE). packages Character vector. Additional packages load workers. init_expr Expression evaluate worker startup. timeout Numeric. Seconds wait shard (default 3600). max_retries Integer. Maximum retries per shard failure (default 3). health_check_interval Integer. Check worker health every N shards (default 10).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parallel Execution with shard_map — shard_map","text":"shard_result object containing: results: List results shard (fun returns values) failures: permanently failed shards diagnostics: Timing, memory, worker statistics pool_stats: Pool-level statistics","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_map.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Parallel Execution with shard_map — shard_map","text":"","code":"if (FALSE) { # \\dontrun{ # Simple parallel computation blocks <- shards(1000, workers = 4) result <- shard_map(blocks, function(shard) {   sum(shard$idx^2) }, workers = 4)  # With shared inputs X <- matrix(rnorm(1e6), nrow = 1000) blocks <- shards(ncol(X), workers = 4) result <- shard_map(blocks,   borrow = list(X = X),   fun = function(shard, X) {     colMeans(X[, shard$idx, drop = FALSE])   },   workers = 4 ) } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_reduce.html","id":null,"dir":"Reference","previous_headings":"","what":"Streaming Reductions over Shards — shard_reduce","title":"Streaming Reductions over Shards — shard_reduce","text":"Reduce shard results without gathering per-shard returns master. shard_reduce() executes map() shards parallel combines results using associative combine() function. Unlike shard_map(), accumulate per-shard results master; streams partials chunks complete.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_reduce.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Streaming Reductions over Shards — shard_reduce","text":"","code":"shard_reduce(   shards,   map,   combine,   init,   borrow = list(),   out = list(),   workers = NULL,   chunk_size = 1L,   profile = c(\"default\", \"memory\", \"speed\"),   mem_cap = \"2GB\",   recycle = TRUE,   cow = c(\"deny\", \"audit\", \"allow\"),   seed = NULL,   diagnostics = TRUE,   packages = NULL,   init_expr = NULL,   timeout = 3600,   max_retries = 3L,   health_check_interval = 10L )"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_reduce.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Streaming Reductions over Shards — shard_reduce","text":"shards shard_descriptor shards(), integer N. map Function executed per shard. Receives shard descriptor first argument, followed borrowed inputs outputs. combine Function (acc, value) -> acc used combine results. associative deterministic behavior chunking. init Initial accumulator value. borrow Named list shared inputs (semantics shard_map()). Named list output buffers/sinks (semantics shard_map()). workers Number worker processes. chunk_size Shards batch per worker dispatch (default 1). profile Execution profile (semantics shard_map()). mem_cap Memory cap per worker (semantics shard_map()). recycle Worker recycling policy (semantics shard_map()). cow Copy--write policy borrowed inputs (semantics shard_map()). seed RNG seed reproducibility. diagnostics Logical; collect diagnostics (default TRUE). packages Additional packages load workers. init_expr Expression evaluate worker startup. timeout Seconds wait chunk. max_retries Maximum retries per chunk. health_check_interval Check worker health every N completions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_reduce.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Streaming Reductions over Shards — shard_reduce","text":"shard_reduce_result fields: value: final accumulator failures: permanently failed chunks diagnostics: run telemetry including reduction stats queue_status, pool_stats","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_reduce.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Streaming Reductions over Shards — shard_reduce","text":"performance memory efficiency, reduction performed two stages: per-chunk partial reduction inside worker, streaming combine partials master.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_reduce.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Streaming Reductions over Shards — shard_reduce","text":"","code":"if (FALSE) { # \\dontrun{ # Sum 1..1e6 without materializing 1e6 per-shard results: res <- shard_reduce(   shards(1e6, block_size = 1000),   map = function(s) sum(s$idx),   combine = function(acc, x) acc + x,   init = 0,   workers = 4 ) res$value } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_register_adapter.html","id":null,"dir":"Reference","previous_headings":"","what":"Register an Adapter for Class-Specific Traversal — shard_register_adapter","title":"Register an Adapter for Class-Specific Traversal — shard_register_adapter","text":"Registers custom adapter specific class. deep sharing encounters object class, use adapter's children() function extract shareable components instead generic traversal.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_register_adapter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Register an Adapter for Class-Specific Traversal — shard_register_adapter","text":"","code":"shard_register_adapter(class, adapter)"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_register_adapter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Register an Adapter for Class-Specific Traversal — shard_register_adapter","text":"class character string naming class register adapter . adapter list containing: class Character string matching class parameter. children Function taking object returning named list child objects traverse. replace Function taking original object named list (potentially shared) children, returning reconstructed object. path_prefix Optional character string prefix child paths sharing plan (default: class name).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_register_adapter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Register an Adapter for Class-Specific Traversal — shard_register_adapter","text":"Invisibly returns previous adapter class (), NULL adapter registered.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_register_adapter.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Register an Adapter for Class-Specific Traversal — shard_register_adapter","text":"","code":"if (FALSE) { # \\dontrun{ # Register an adapter for a custom S4 class setClass(\"MyData\", slots = c(data = \"matrix\", metadata = \"list\"))  shard_register_adapter(\"MyData\", list(   class = \"MyData\",   children = function(x) list(data = x@data),  # Only share the data slot   replace = function(x, children) {     x@data <- children$data     x   } ))  # Now deep sharing will only traverse the 'data' slot obj <- new(\"MyData\", data = matrix(1:1e6, nrow = 1000), metadata = list(a = 1)) shared <- share(obj, deep = TRUE, min_bytes = 1000) } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_share_hook.html","id":null,"dir":"Reference","previous_headings":"","what":"Deep Sharing Hook for Custom Classes — shard_share_hook","title":"Deep Sharing Hook for Custom Classes — shard_share_hook","text":"S3 generic allows classes customize deep sharing behavior. Override class control slots/elements traversed, force sharing small objects, transform objects traversal.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_share_hook.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deep Sharing Hook for Custom Classes — shard_share_hook","text":"","code":"shard_share_hook(x, ctx)  # Default S3 method shard_share_hook(x, ctx)"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_share_hook.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Deep Sharing Hook for Custom Classes — shard_share_hook","text":"x object traversed deep sharing. ctx context list containing: path Current node path string (e.g., \"$data@cache\") class class(x) - object's class vector mode 'strict' 'balanced' - sharing mode min_bytes Minimum size threshold sharing types Character vector enabled types sharing deep Logical, always TRUE hook called","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_share_hook.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Deep Sharing Hook for Custom Classes — shard_share_hook","text":"list optional fields: skip_slots Character vector S4 slot names traverse skip_paths Character vector paths traverse force_share_paths Character vector paths force share (ignore min_bytes) rewrite Function(x) -> x transform object traversal Return empty list default behavior (customization).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_share_hook.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Deep Sharing Hook for Custom Classes — shard_share_hook","text":"","code":"if (FALSE) { # \\dontrun{ # Define a hook for a class with a cache slot to skip shard_share_hook.MyModelClass <- function(x, ctx) {     list(         skip_slots = \"cache\",  # Don't traverse the cache slot         force_share_paths = paste0(ctx$path, \"@coefficients\")  # Always share coefficients     ) }  # Define a hook that rewrites objects before sharing shard_share_hook.LazyData <- function(x, ctx) {     list(         rewrite = function(obj) {             # Materialize lazy data before sharing             obj$data <- as.matrix(obj$data)             obj         }     ) } } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_unregister_adapter.html","id":null,"dir":"Reference","previous_headings":"","what":"Unregister an Adapter — shard_unregister_adapter","title":"Unregister an Adapter — shard_unregister_adapter","text":"Removes previously registered adapter class. unregistration, objects class use default traversal behavior deep sharing.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_unregister_adapter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Unregister an Adapter — shard_unregister_adapter","text":"","code":"shard_unregister_adapter(class)"},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_unregister_adapter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Unregister an Adapter — shard_unregister_adapter","text":"class character string naming class unregister.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_unregister_adapter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Unregister an Adapter — shard_unregister_adapter","text":"Invisibly returns removed adapter, NULL adapter registered class.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shard_unregister_adapter.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Unregister an Adapter — shard_unregister_adapter","text":"","code":"if (FALSE) { # \\dontrun{ # Remove adapter for MyData class old_adapter <- shard_unregister_adapter(\"MyData\") } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/shards.html","id":null,"dir":"Reference","previous_headings":"","what":"Shard Descriptor Creation — shards","title":"Shard Descriptor Creation — shards","text":"Create shard descriptors parallel execution autotuning. Produces shard descriptors (index ranges) use shard_map(). Supports autotuning based worker count memory constraints.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shards.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Shard Descriptor Creation — shards","text":"","code":"shards(   n,   block_size = \"auto\",   workers = NULL,   strategy = c(\"contiguous\", \"strided\"),   min_shards_per_worker = 4L,   max_shards_per_worker = 64L,   scratch_bytes_per_item = 0,   scratch_budget = 0 )"},{"path":"https://bbuchsbaum.github.io/shard/reference/shards.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Shard Descriptor Creation — shards","text":"n Integer. Total number items shard. block_size Block size specification. Can : \"auto\" (default): Autotune based worker count Integer: Explicit number items per shard Character: Human-readable like \"1K\", \"10K\" workers Integer. Number workers autotuning (default: pool size detectCores - 1). strategy Sharding strategy: \"contiguous\" (default) \"strided\". min_shards_per_worker Integer. Minimum shards per worker load balancing (default 4). max_shards_per_worker Integer. Maximum shards per worker limit overhead (default 64). scratch_bytes_per_item Numeric. Expected scratch memory per item memory budgeting. scratch_budget Character numeric. Total scratch memory budget (e.g., \"1GB\").","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shards.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Shard Descriptor Creation — shards","text":"shard_descriptor object containing: n: Total items block_size: Computed block size strategy: Strategy used shards: List shard descriptors id, start, end, idx fields","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shards.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Shard Descriptor Creation — shards","text":"","code":"# Autotune for 8 workers blocks <- shards(1e6, workers = 8) length(blocks$shards)  # Number of shards #> [1] 32  # Explicit block size blocks <- shards(1000, block_size = 100)  # Access shard indices blocks$shards[[1]]$idx  # Indices for first shard #>   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18 #>  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36 #>  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54 #>  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72 #>  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90 #>  [91]  91  92  93  94  95  96  97  98  99 100"},{"path":"https://bbuchsbaum.github.io/shard/reference/shards_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Shards from an Explicit Index List — shards_list","title":"Create Shards from an Explicit Index List — shards_list","text":"Constructs shard_descriptor user-supplied list index vectors. useful non-contiguous workloads like searchlights/feature sets shard operates arbitrary subset.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shards_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Shards from an Explicit Index List — shards_list","text":"","code":"shards_list(idxs)"},{"path":"https://bbuchsbaum.github.io/shard/reference/shards_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Shards from an Explicit Index List — shards_list","text":"idxs List integer vectors (1-based indices). element becomes one shard fields id, idx, len.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shards_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Shards from an Explicit Index List — shards_list","text":"shard_descriptor.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/share.html","id":null,"dir":"Reference","previous_headings":"","what":"Zero-Copy Shared Objects — share","title":"Zero-Copy Shared Objects — share","text":"Create shared memory representations R objects efficient parallel access without duplication. Creates shared memory representation R object. object serialized can accessed multiple worker processes without copying.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/share.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Zero-Copy Shared Objects — share","text":"","code":"share(   x,   backing = c(\"auto\", \"mmap\", \"shm\"),   readonly = TRUE,   name = NULL,   deep = FALSE,   min_bytes = 64 * 1024 * 1024,   cycle = c(\"error\", \"skip\"),   mode = c(\"balanced\", \"strict\") )"},{"path":"https://bbuchsbaum.github.io/shard/reference/share.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Zero-Copy Shared Objects — share","text":"x R object share. Supports vectors, matrices, arrays, lists, data frames, object can serialized serialize(). backing Backing type: \"auto\" (default), \"mmap\", \"shm\". \"auto\": Let system choose best option. \"mmap\": File-backed memory mapping. portable. \"shm\": POSIX shared memory Windows named mapping. readonly Logical. TRUE (default), segment protected writing, making read-. Set FALSE need modify shared data (advanced use case). name Optional name shared object. NULL (default), unique name generated. Named shares can opened name processes. deep Logical. TRUE, recursively traverse lists data.frames, sharing individual components meet size threshold. FALSE (default), entire object serialized one unit. min_bytes Minimum size bytes object shared deep=TRUE. Objects smaller threshold kept -place. Default 64MB (64 * 1024 * 1024). cycle handle cyclic references deep=TRUE. Either \"error\" (default) stop error, \"skip\" skip cyclic references. mode Sharing mode deep=TRUE. Either \"balanced\" (default) continue hook errors non-shareable types, \"strict\" error.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/share.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Zero-Copy Shared Objects — share","text":"shard_shared object (deep=FALSE) shard_deep_shared object (deep=TRUE) containing: path: path name shared segment backing: backing type used size: Total size bytes readonly: Whether segment protected class_info: Original class information","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/share.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Zero-Copy Shared Objects — share","text":"share() function primary high-level API creating zero-copy shared inputs. share object: object serialized shared memory segment segment marked read-(protected) lightweight handle returned can passed workers Workers attach segment deserialize demand approach eliminates per-worker duplication large inputs. data exists shared memory, workers read location. Immutability Contract: Shared objects immutable design. attempt modify shared data worker fail. guarantees deterministic behavior prevents accidental copy--write.","code":""},{"path":[]},{"path":"https://bbuchsbaum.github.io/shard/reference/share.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Zero-Copy Shared Objects — share","text":"","code":"if (FALSE) { # \\dontrun{ # Share a large matrix mat <- matrix(rnorm(1e6), nrow = 1000) shared_mat <- share(mat)  # The shared object is lightweight - only metadata print(object.size(shared_mat))  # Small  # Get the data back with fetch() recovered <- fetch(shared_mat) identical(mat, recovered)  # TRUE  # Use in parallel (workers access without copying) pool_create(4) result <- pool_lapply(1:10, function(i) {   # Workers can access shared_mat efficiently   data <- fetch(shared_mat)   sum(data[i, ]) })  # Clean up when done close(shared_mat)  # Deep sharing with alias preservation big_mat <- matrix(rnorm(1e6), nrow = 1000) lst <- list(a = big_mat, b = big_mat)  # Same object referenced twice shared_lst <- share(lst, deep = TRUE, min_bytes = 1000) # Creates only ONE shared segment - both 'a' and 'b' reference it } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/share_open.html","id":null,"dir":"Reference","previous_headings":"","what":"Open an Existing Shared Object by Path — share_open","title":"Open an Existing Shared Object by Path — share_open","text":"Opens shared object created another process. useful workers need attach shared data without original shard_shared object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/share_open.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Open an Existing Shared Object by Path — share_open","text":"","code":"share_open(path, backing = c(\"mmap\", \"shm\"), size = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/share_open.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Open an Existing Shared Object by Path — share_open","text":"path Path shared segment. backing Backing type: \"mmap\" \"shm\". size Size segment bytes. NULL, attempts detect.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/share_open.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Open an Existing Shared Object by Path — share_open","text":"shard_shared object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_advise.html","id":null,"dir":"Reference","previous_headings":"","what":"Advise access pattern for a shared input vector/matrix — shared_advise","title":"Advise access pattern for a shared input vector/matrix — shared_advise","text":"Advise access pattern shared input vector/matrix","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_advise.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Advise access pattern for a shared input vector/matrix — shared_advise","text":"","code":"shared_advise(   x,   advice = c(\"normal\", \"sequential\", \"random\", \"willneed\", \"dontneed\") )"},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_advise.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Advise access pattern for a shared input vector/matrix — shared_advise","text":"x shard shared vector (share()). advice See segment_advise().","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_advise.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Advise access pattern for a shared input vector/matrix — shared_advise","text":"Logical.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_diagnostics.html","id":null,"dir":"Reference","previous_headings":"","what":"Get diagnostics for a shared vector — shared_diagnostics","title":"Get diagnostics for a shared vector — shared_diagnostics","text":"Get diagnostics shared vector","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_diagnostics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get diagnostics for a shared vector — shared_diagnostics","text":"","code":"shared_diagnostics(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_diagnostics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get diagnostics for a shared vector — shared_diagnostics","text":"x shard ALTREP vector","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_diagnostics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get diagnostics for a shared vector — shared_diagnostics","text":"list diagnostic information: dataptr_calls Number times DATAPTR accessed materialize_calls Number times vector copied standard R vector length Number elements offset Byte offset underlying segment readonly Whether write access prevented type R type vector","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_diagnostics.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get diagnostics for a shared vector — shared_diagnostics","text":"","code":"if (FALSE) { # \\dontrun{ seg <- segment_create(400) segment_write(seg, 1:100, offset = 0) x <- shared_vector(seg, \"integer\", length = 100)  # Access data sum(x)  # Check diagnostics shared_diagnostics(x) } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Information About a Shared Object — shared_info","title":"Get Information About a Shared Object — shared_info","text":"Get Information Shared Object","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Information About a Shared Object — shared_info","text":"","code":"shared_info(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Information About a Shared Object — shared_info","text":"x shard_shared object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Information About a Shared Object — shared_info","text":"list detailed information shared segment.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_reset_diagnostics.html","id":null,"dir":"Reference","previous_headings":"","what":"Reset diagnostic counters for a shared vector — shared_reset_diagnostics","title":"Reset diagnostic counters for a shared vector — shared_reset_diagnostics","text":"Reset diagnostic counters shared vector","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_reset_diagnostics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reset diagnostic counters for a shared vector — shared_reset_diagnostics","text":"","code":"shared_reset_diagnostics(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_reset_diagnostics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reset diagnostic counters for a shared vector — shared_reset_diagnostics","text":"x shard ALTREP vector","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_reset_diagnostics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reset diagnostic counters for a shared vector — shared_reset_diagnostics","text":"x (invisibly)","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_reset_diagnostics.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Reset diagnostic counters for a shared vector — shared_reset_diagnostics","text":"","code":"if (FALSE) { # \\dontrun{ seg <- segment_create(400) segment_write(seg, 1:100, offset = 0) x <- shared_vector(seg, \"integer\", length = 100)  sum(x) shared_diagnostics(x)$dataptr_calls  # > 0  shared_reset_diagnostics(x) shared_diagnostics(x)$dataptr_calls  # 0 } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_segment.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the underlying segment from a shared vector — shared_segment","title":"Get the underlying segment from a shared vector — shared_segment","text":"Get underlying segment shared vector","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_segment.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the underlying segment from a shared vector — shared_segment","text":"","code":"shared_segment(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_segment.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the underlying segment from a shared vector — shared_segment","text":"x shard ALTREP vector","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_segment.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the underlying segment from a shared vector — shared_segment","text":"external pointer underlying segment","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_vector.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a shared vector from a segment — shared_vector","title":"Create a shared vector from a segment — shared_vector","text":"Create shared vector segment","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_vector.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a shared vector from a segment — shared_vector","text":"","code":"shared_vector(   segment,   type = c(\"double\", \"integer\", \"logical\", \"raw\"),   offset = 0,   length = NULL,   readonly = TRUE,   cow = NULL )"},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_vector.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a shared vector from a segment — shared_vector","text":"segment shard_segment object type Vector type: \"integer\", \"double\"/\"numeric\", \"logical\", \"raw\" offset Byte offset segment (default: 0) length Number elements. NULL, calculated segment size. readonly TRUE, prevent write access via DATAPTR (default: TRUE) cow Copy--write policy mutation attempts. One \"deny\", \"audit\", \"allow\". NULL, defaults \"deny\" readonly=TRUE \"allow\" otherwise.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_vector.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a shared vector from a segment — shared_vector","text":"ALTREP vector backed shared memory","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_vector.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a shared vector from a segment — shared_vector","text":"","code":"if (FALSE) { # \\dontrun{ # Create a segment and store integers seg <- segment_create(400)  # 100 integers * 4 bytes segment_write(seg, 1:100, offset = 0)  # Create ALTREP view x <- shared_vector(seg, \"integer\", length = 100) x[1:10]  # Returns a view, not a copy  # Check diagnostics shared_diagnostics(x) } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_view.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a view (subset) of a shared vector — shared_view","title":"Create a view (subset) of a shared vector — shared_view","text":"Create view (subset) shared vector","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_view.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a view (subset) of a shared vector — shared_view","text":"","code":"shared_view(x, start, length)"},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_view.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a view (subset) of a shared vector — shared_view","text":"x shard ALTREP vector start Start index (1-based, like R) length Number elements","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_view.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a view (subset) of a shared vector — shared_view","text":"ALTREP view shared memory","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/shared_view.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a view (subset) of a shared vector — shared_view","text":"","code":"if (FALSE) { # \\dontrun{ seg <- segment_create(800) segment_write(seg, 1:100, offset = 0) x <- shared_vector(seg, \"integer\", length = 100)  # Create a view of elements 10-20 y <- shared_view(x, start = 10, length = 11) y[1]  # Same as x[10] } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_count.html","id":null,"dir":"Reference","previous_headings":"","what":"Stream row count — stream_count","title":"Stream row count — stream_count","text":"Stream row count","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_count.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stream row count — stream_count","text":"","code":"stream_count(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_count.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stream row count — stream_count","text":"x shard_row_groups shard_dataset handle.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_count.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stream row count — stream_count","text":"Total number rows.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_filter.html","id":null,"dir":"Reference","previous_headings":"","what":"Stream-filter a dataset/row-groups into a new partitioned dataset — stream_filter","title":"Stream-filter a dataset/row-groups into a new partitioned dataset — stream_filter","text":"Reads partition, filters rows, writes new partitioned dataset. Output written one partition per input partition (empty partitions allowed). avoids materializing results.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_filter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stream-filter a dataset/row-groups into a new partitioned dataset — stream_filter","text":"","code":"stream_filter(x, predicate, path = NULL, ...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_filter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stream-filter a dataset/row-groups into a new partitioned dataset — stream_filter","text":"x shard_row_groups shard_dataset handle. predicate Function (chunk, ...) -> logical row mask (length == nrow(chunk)). path Output directory. NULL, temp dir created. ... Passed predicate().","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_filter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stream-filter a dataset/row-groups into a new partitioned dataset — stream_filter","text":"shard_dataset handle.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_group_count.html","id":null,"dir":"Reference","previous_headings":"","what":"Stream group-wise count — stream_group_count","title":"Stream group-wise count — stream_group_count","text":"Counts rows per group across partitions without collecting. Optimized factor groups (factor_col()).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_group_count.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stream group-wise count — stream_group_count","text":"","code":"stream_group_count(x, group)"},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_group_count.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stream group-wise count — stream_group_count","text":"x shard_row_groups shard_dataset handle. group Group column name (recommended: factor_col()).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_group_count.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stream group-wise count — stream_group_count","text":"data.frame columns group n.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_group_sum.html","id":null,"dir":"Reference","previous_headings":"","what":"Stream group-wise sum — stream_group_sum","title":"Stream group-wise sum — stream_group_sum","text":"Computes sum(value) group across partitions without collecting. optimized factor groups (factor_col()).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_group_sum.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stream group-wise sum — stream_group_sum","text":"","code":"stream_group_sum(x, group, value, na_rm = TRUE)"},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_group_sum.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stream group-wise sum — stream_group_sum","text":"x shard_row_groups shard_dataset handle. group Group column name (recommended: factor_col()). value Numeric column name sum. na_rm Logical; drop rows value NA (default TRUE).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_group_sum.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stream group-wise sum — stream_group_sum","text":"data.frame columns group sum.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Stream over row-groups/datasets and map — stream_map","title":"Stream over row-groups/datasets and map — stream_map","text":"Applies f() partition returns list per-partition results. still much cheaper collecting full dataset f() returns small summary per partition.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stream over row-groups/datasets and map — stream_map","text":"","code":"stream_map(x, f, ...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_map.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stream over row-groups/datasets and map — stream_map","text":"x shard_row_groups shard_dataset handle. f Function (chunk, ...) -> value. ... Passed f().","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stream over row-groups/datasets and map — stream_map","text":"list per-partition values (one per file).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_reduce.html","id":null,"dir":"Reference","previous_headings":"","what":"Stream over row-groups/datasets and reduce — stream_reduce","title":"Stream over row-groups/datasets and reduce — stream_reduce","text":"Applies f() partition (row-group) combines results combine() single accumulator. keeps peak memory bounded largest single partition (plus accumulator).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_reduce.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stream over row-groups/datasets and reduce — stream_reduce","text":"","code":"stream_reduce(x, f, init, combine, ...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_reduce.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stream over row-groups/datasets and reduce — stream_reduce","text":"x shard_row_groups shard_dataset handle. f Function (chunk, ...) -> value producing per-partition value. init Initial accumulator value. combine Function (acc, value) -> acc update accumulator. ... Passed f().","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_reduce.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stream over row-groups/datasets and reduce — stream_reduce","text":"final accumulator.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_sum.html","id":null,"dir":"Reference","previous_headings":"","what":"Stream sum of a numeric column — stream_sum","title":"Stream sum of a numeric column — stream_sum","text":"Computes sum col across partitions without collecting full dataset. partitions native-encoded, avoids decoding string columns entirely.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_sum.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stream sum of a numeric column — stream_sum","text":"","code":"stream_sum(x, col, na_rm = TRUE)"},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_sum.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stream sum of a numeric column — stream_sum","text":"x shard_row_groups shard_dataset handle. col Column name sum. na_rm Logical; drop NAs (default TRUE).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_sum.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stream sum of a numeric column — stream_sum","text":"single numeric sum.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_top_k.html","id":null,"dir":"Reference","previous_headings":"","what":"Stream top-k rows by a numeric column — stream_top_k","title":"Stream top-k rows by a numeric column — stream_top_k","text":"Finds top k rows col without collecting full dataset.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_top_k.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Stream top-k rows by a numeric column — stream_top_k","text":"","code":"stream_top_k(x, col, k = 10L, decreasing = TRUE, na_drop = TRUE)"},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_top_k.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Stream top-k rows by a numeric column — stream_top_k","text":"x shard_row_groups shard_dataset handle. col Column name rank . k Number rows keep. decreasing Logical; TRUE largest values (default TRUE). na_drop Logical; drop rows col NA (default TRUE).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_top_k.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Stream top-k rows by a numeric column — stream_top_k","text":"data.frame (tibble installed) k rows.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/stream_top_k.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Stream top-k rows by a numeric column — stream_top_k","text":"native-encoded partitions, selects candidate rows using numeric column without decoding strings, decodes chosen rows returned result.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-.shard_buffer.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Buffer Elements — [.shard_buffer","title":"Extract Buffer Elements — [.shard_buffer","text":"Extract Buffer Elements","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-.shard_buffer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Buffer Elements — [.shard_buffer","text":"","code":"# S3 method for class 'shard_buffer' x[i, j, ..., drop = TRUE]"},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-.shard_buffer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Buffer Elements — [.shard_buffer","text":"x shard_buffer object. Index indices. j Optional second index (matrices). ... Additional indices (arrays). drop Whether drop dimensions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-.shard_buffer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Buffer Elements — [.shard_buffer","text":"Vector array values.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-.shard_descriptor.html","id":null,"dir":"Reference","previous_headings":"","what":"Subset Shard Descriptor — [.shard_descriptor","title":"Subset Shard Descriptor — [.shard_descriptor","text":"Subset Shard Descriptor","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-.shard_descriptor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Subset Shard Descriptor — [.shard_descriptor","text":"","code":"# S3 method for class 'shard_descriptor' x[i]"},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-.shard_descriptor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Subset Shard Descriptor — [.shard_descriptor","text":"x shard_descriptor object. Index indices.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-.shard_descriptor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Subset Shard Descriptor — [.shard_descriptor","text":"selected shard(s).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-sub-.shard_descriptor.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Single Shard — [[.shard_descriptor","title":"Get Single Shard — [[.shard_descriptor","text":"Get Single Shard","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-sub-.shard_descriptor.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Single Shard — [[.shard_descriptor","text":"","code":"# S3 method for class 'shard_descriptor' x[[i]]"},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-sub-.shard_descriptor.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Single Shard — [[.shard_descriptor","text":"x shard_descriptor object. Index.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/sub-sub-.shard_descriptor.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Single Shard — [[.shard_descriptor","text":"selected shard.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/subset-.shard_buffer.html","id":null,"dir":"Reference","previous_headings":"","what":"Assign to Buffer Elements — [<-.shard_buffer","title":"Assign to Buffer Elements — [<-.shard_buffer","text":"Assign Buffer Elements","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/subset-.shard_buffer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assign to Buffer Elements — [<-.shard_buffer","text":"","code":"# S3 method for class 'shard_buffer' x[i, j, ...] <- value"},{"path":"https://bbuchsbaum.github.io/shard/reference/subset-.shard_buffer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assign to Buffer Elements — [<-.shard_buffer","text":"x shard_buffer object. Index indices. j Optional second index (matrices). ... Additional indices (arrays). value Values assign.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/subset-.shard_buffer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assign to Buffer Elements — [<-.shard_buffer","text":"modified buffer (invisibly).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/succeeded.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if shard_map Succeeded — succeeded","title":"Check if shard_map Succeeded — succeeded","text":"Check shard_map Succeeded","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/succeeded.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if shard_map Succeeded — succeeded","text":"","code":"succeeded(x)"},{"path":"https://bbuchsbaum.github.io/shard/reference/succeeded.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if shard_map Succeeded — succeeded","text":"x shard_result object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/succeeded.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if shard_map Succeeded — succeeded","text":"Logical. TRUE failures.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_buffer.html","id":null,"dir":"Reference","previous_headings":"","what":"Allocate a fixed-row table buffer — table_buffer","title":"Allocate a fixed-row table buffer — table_buffer","text":"Allocates columnar table output: one typed buffer per column, length nrow. Intended lock-free disjoint row-range writes shard_map.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_buffer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Allocate a fixed-row table buffer — table_buffer","text":"","code":"table_buffer(schema, nrow, backing = c(\"auto\", \"mmap\", \"shm\"))"},{"path":"https://bbuchsbaum.github.io/shard/reference/table_buffer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Allocate a fixed-row table buffer — table_buffer","text":"schema shard_schema. nrow Total number rows final table. backing Backing type buffers (\"auto\", \"mmap\", \"shm\").","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_buffer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Allocate a fixed-row table buffer — table_buffer","text":"shard_table_buffer.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_diagnostics.html","id":null,"dir":"Reference","previous_headings":"","what":"Table Diagnostics — table_diagnostics","title":"Table Diagnostics — table_diagnostics","text":"Per-process counters table writes (number table_write calls, rows, bytes written). shard_map uses deltas counters produce run-level diagnostics copy_report().","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_diagnostics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Table Diagnostics — table_diagnostics","text":"","code":"table_diagnostics()"},{"path":"https://bbuchsbaum.github.io/shard/reference/table_diagnostics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Table Diagnostics — table_diagnostics","text":"list writes, rows, bytes.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.html","id":null,"dir":"Reference","previous_headings":"","what":"Finalize a table buffer or sink — table_finalize","title":"Finalize a table buffer or sink — table_finalize","text":"shard_table_buffer, returns lightweight -memory handle (materialized data.frame/tibble, depending materialize).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finalize a table buffer or sink — table_finalize","text":"","code":"table_finalize(   target,   materialize = c(\"never\", \"auto\", \"always\"),   max_bytes = 256 * 1024^2,   ... )"},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finalize a table buffer or sink — table_finalize","text":"target shard_table_buffer shard_table_sink. materialize \"never\", \"auto\", \"always\". max_bytes \"auto\", materialize estimated bytes <= max_bytes. ... Reserved future extensions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Finalize a table buffer or sink — table_finalize","text":"shard_table_sink, returns row-group handle referencing written partitions (materializes requested).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.shard_table_buffer.html","id":null,"dir":"Reference","previous_headings":"","what":"Finalize a table buffer — table_finalize.shard_table_buffer","title":"Finalize a table buffer — table_finalize.shard_table_buffer","text":"Finalize table buffer","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.shard_table_buffer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finalize a table buffer — table_finalize.shard_table_buffer","text":"","code":"# S3 method for class 'shard_table_buffer' table_finalize(   target,   materialize = c(\"never\", \"auto\", \"always\"),   max_bytes = 256 * 1024^2,   ... )"},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.shard_table_buffer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finalize a table buffer — table_finalize.shard_table_buffer","text":"target shard_table_buffer. materialize \"never\", \"auto\", \"always\". max_bytes \"auto\", materialize estimated bytes <= max_bytes. ... Reserved future extensions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.shard_table_buffer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Finalize a table buffer — table_finalize.shard_table_buffer","text":"shard_table_handle materialized data.frame/tibble.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.shard_table_sink.html","id":null,"dir":"Reference","previous_headings":"","what":"Finalize a sink — table_finalize.shard_table_sink","title":"Finalize a sink — table_finalize.shard_table_sink","text":"Finalize sink","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.shard_table_sink.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Finalize a sink — table_finalize.shard_table_sink","text":"","code":"# S3 method for class 'shard_table_sink' table_finalize(   target,   materialize = c(\"never\", \"auto\", \"always\"),   max_bytes = 256 * 1024^2,   ... )"},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.shard_table_sink.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Finalize a sink — table_finalize.shard_table_sink","text":"target shard_table_sink. materialize \"never\", \"auto\", \"always\". max_bytes \"auto\", materialize estimated bytes <= max_bytes. ... Reserved future extensions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_finalize.shard_table_sink.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Finalize a sink — table_finalize.shard_table_sink","text":"shard_row_groups handle (materialized data.frame/tibble).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_sink.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a table sink for row-group or partitioned outputs — table_sink","title":"Create a table sink for row-group or partitioned outputs — table_sink","text":"table sink supports variable-sized outputs without returning large data.frames master. shard writes separate row-group file.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_sink.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a table sink for row-group or partitioned outputs — table_sink","text":"","code":"table_sink(   schema,   mode = c(\"row_groups\", \"partitioned\"),   path = NULL,   format = c(\"auto\", \"rds\", \"native\") )"},{"path":"https://bbuchsbaum.github.io/shard/reference/table_sink.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a table sink for row-group or partitioned outputs — table_sink","text":"schema shard_schema. NULL, schema-less sink created (RDS format ). primarily intended doShard/foreach compatibility output schemas may known advance. mode \"row_groups\" (temp, managed) \"partitioned\" (persistent path). path Directory write row-group files. NULL, temp dir created. format Storage format partitions: \"rds\" (data.frame RDS), \"native\" (columnar encoding string offsets+bytes), \"auto\" (selects \"native\" schema contains string_col(); otherwise \"rds\").","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_sink.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a table sink for row-group or partitioned outputs — table_sink","text":"shard_table_sink.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_sink.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a table sink for row-group or partitioned outputs — table_sink","text":"v1.1 implementation notes: Storage format per-shard RDS (portable, CRAN-friendly). guarantees bounded master memory execution; final collection may still large materialize.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_write.html","id":null,"dir":"Reference","previous_headings":"","what":"Write tabular results into a table buffer or sink — table_write","title":"Write tabular results into a table buffer or sink — table_write","text":"table_write() common write path shard table outputs: fixed-size outputs, write shard_table_buffer using row selector. variable-size outputs, write shard_table_sink using shard id.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_write.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write tabular results into a table buffer or sink — table_write","text":"","code":"table_write(target, rows_or_shard_id, data, ...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/table_write.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write tabular results into a table buffer or sink — table_write","text":"target shard_table_buffer shard_table_sink. rows_or_shard_id buffers: row selector (idx_range integer vector). sinks: shard id (integer). data data.frame named list matching schema columns. ... Reserved future extensions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_write.shard_table_buffer.html","id":null,"dir":"Reference","previous_headings":"","what":"Write into a table buffer — table_write.shard_table_buffer","title":"Write into a table buffer — table_write.shard_table_buffer","text":"Write table buffer","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_write.shard_table_buffer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write into a table buffer — table_write.shard_table_buffer","text":"","code":"# S3 method for class 'shard_table_buffer' table_write(target, rows_or_shard_id, data, ...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/table_write.shard_table_buffer.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write into a table buffer — table_write.shard_table_buffer","text":"target shard_table_buffer. rows_or_shard_id Row selector (idx_range integer vector). data data.frame named list matching schema columns. ... Reserved future extensions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_write.shard_table_buffer.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write into a table buffer — table_write.shard_table_buffer","text":"NULL (invisibly).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_write.shard_table_sink.html","id":null,"dir":"Reference","previous_headings":"","what":"Write a shard's row-group output — table_write.shard_table_sink","title":"Write a shard's row-group output — table_write.shard_table_sink","text":"Write shard's row-group output","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_write.shard_table_sink.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write a shard's row-group output — table_write.shard_table_sink","text":"","code":"# S3 method for class 'shard_table_sink' table_write(target, rows_or_shard_id, data, ...)"},{"path":"https://bbuchsbaum.github.io/shard/reference/table_write.shard_table_sink.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write a shard's row-group output — table_write.shard_table_sink","text":"target shard_table_sink. rows_or_shard_id Integer shard id used name row-group file. data data.frame matching sink schema. ... Reserved future extensions.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/table_write.shard_table_sink.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write a shard's row-group output — table_write.shard_table_sink","text":"NULL (invisibly).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/task_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Task Execution Report — task_report","title":"Task Execution Report — task_report","text":"Generates report task/chunk execution statistics shard_map result.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/task_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Task Execution Report — task_report","text":"","code":"task_report(result = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/task_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Task Execution Report — task_report","text":"result shard_result object shard_map.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/task_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Task Execution Report — task_report","text":"S3 object class shard_report type \"task\" containing: type: \"task\" timestamp: report generated shards_total: Total number shards shards_processed: Number shards successfully processed shards_failed: Number permanently failed shards chunks_dispatched: Number chunk batches dispatched total_retries: Total number retry attempts duration: Total execution duration (seconds) throughput: Shards processed per second queue_status: Final queue status","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/task_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Task Execution Report — task_report","text":"","code":"if (FALSE) { # \\dontrun{ result <- shard_map(shards(100), function(s) sum(s$idx)) task_report(result) } # }"},{"path":"https://bbuchsbaum.github.io/shard/reference/unique_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Unique ID — unique_id","title":"Generate Unique ID — unique_id","text":"Creates short unique identifier.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/unique_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Unique ID — unique_id","text":"","code":"unique_id(prefix = \"\")"},{"path":"https://bbuchsbaum.github.io/shard/reference/unique_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Unique ID — unique_id","text":"prefix Character. Prefix ID.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/unique_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Unique ID — unique_id","text":"Character string like \"prefix_a1b2c3\".","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/utils.html","id":null,"dir":"Reference","previous_headings":"","what":"Utility Functions — utils","title":"Utility Functions — utils","text":"Internal utilities shard package.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_adapter.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate Adapter Structure — validate_adapter","title":"Validate Adapter Structure — validate_adapter","text":"Internal function validate adapter required structure.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_adapter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate Adapter Structure — validate_adapter","text":"","code":"validate_adapter(adapter, class_name)"},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_adapter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate Adapter Structure — validate_adapter","text":"adapter list adapter functions. class_name class name registered.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_adapter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate Adapter Structure — validate_adapter","text":"TRUE valid, throws error otherwise.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_borrow.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate Borrowed Inputs — validate_borrow","title":"Validate Borrowed Inputs — validate_borrow","text":"Validates prepares borrowed inputs.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_borrow.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate Borrowed Inputs — validate_borrow","text":"","code":"validate_borrow(borrow, cow)"},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_borrow.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate Borrowed Inputs — validate_borrow","text":"borrow List inputs. cow COW policy.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_borrow.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate Borrowed Inputs — validate_borrow","text":"Validated borrow list.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_out.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate Output Buffers — validate_out","title":"Validate Output Buffers — validate_out","text":"Validates output buffer specifications.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_out.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate Output Buffers — validate_out","text":"","code":"validate_out(out)"},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_out.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate Output Buffers — validate_out","text":"List output buffers.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/validate_out.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate Output Buffers — validate_out","text":"Validated list.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a view over a shared matrix — view","title":"Create a view over a shared matrix — view","text":"Create view shared matrix","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a view over a shared matrix — view","text":"","code":"view(x, rows = NULL, cols = NULL, type = c(\"auto\", \"block\", \"gather\"))"},{"path":"https://bbuchsbaum.github.io/shard/reference/view.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a view over a shared matrix — view","text":"x shared (share()d) atomic matrix (double/integer/logical/raw). rows Row selector. NULL (rows) idx_range(). cols Column selector. NULL (cols) idx_range(). type View type. \"block\" \"gather\" (\"auto\").","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a view over a shared matrix — view","text":"view object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_block.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a contiguous block view — view_block","title":"Create a contiguous block view — view_block","text":"Create contiguous block view","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_block.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a contiguous block view — view_block","text":"","code":"view_block(x, rows = NULL, cols = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/view_block.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a contiguous block view — view_block","text":"x shared (share()d) atomic matrix. rows NULL idx_range(). cols NULL idx_range().","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_block.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a contiguous block view — view_block","text":"shard_view_block object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_diagnostics.html","id":null,"dir":"Reference","previous_headings":"","what":"View diagnostics — view_diagnostics","title":"View diagnostics — view_diagnostics","text":"Returns global counters view creation/materialization. simple first step; future integrated shard_map run-level diagnostics.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_diagnostics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"View diagnostics — view_diagnostics","text":"","code":"view_diagnostics()"},{"path":"https://bbuchsbaum.github.io/shard/reference/view_diagnostics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"View diagnostics — view_diagnostics","text":"list counters.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_gather.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a gather (indexed) view over a shared matrix — view_gather","title":"Create a gather (indexed) view over a shared matrix — view_gather","text":"Gather views describe non-contiguous column (row) subsets without allocating slice-sized matrix. shard-aware kernels can choose pack requested indices scratch explicitly (bounded reportable) run gather-aware compute paths.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_gather.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create a gather (indexed) view over a shared matrix — view_gather","text":"","code":"view_gather(x, rows = NULL, cols)"},{"path":"https://bbuchsbaum.github.io/shard/reference/view_gather.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a gather (indexed) view over a shared matrix — view_gather","text":"x shared (share()d) atomic matrix (double/integer/logical/raw). rows Row selector. NULL (rows) idx_range(). cols Integer vector column indices (1-based).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_gather.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a gather (indexed) view over a shared matrix — view_gather","text":"view object class shard_view_gather.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_gather.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create a gather (indexed) view over a shared matrix — view_gather","text":"v1 note: column-gather views implemented (rows may NULL idx_range()).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_info.html","id":null,"dir":"Reference","previous_headings":"","what":"Introspection for a view — view_info","title":"Introspection for a view — view_info","text":"Returns metadata view without forcing materialization.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_info.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Introspection for a view — view_info","text":"","code":"view_info(v)"},{"path":"https://bbuchsbaum.github.io/shard/reference/view_info.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Introspection for a view — view_info","text":"v shard view.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/view_info.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Introspection for a view — view_info","text":"named list metadata.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/views.html","id":null,"dir":"Reference","previous_headings":"","what":"Zero-copy Views — views","title":"Zero-copy Views — views","text":"Views explicit slice descriptors shared arrays/matrices. avoid creating slice-sized allocations (e.g. Y[, :b]) carrying metadata plus reference shared backing.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/views.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Zero-copy Views — views","text":"low-level optimization handle: arbitrary base R operations may materialize view; use materialize() explicitly want standard matrix/array.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker.html","id":null,"dir":"Reference","previous_headings":"","what":"Individual Worker Control — worker","title":"Individual Worker Control — worker","text":"Spawn, monitor, control individual R worker processes.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_eval.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluate Expression in Worker — worker_eval","title":"Evaluate Expression in Worker — worker_eval","text":"Sends expression worker evaluation.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_eval.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluate Expression in Worker — worker_eval","text":"","code":"worker_eval(worker, expr, envir = parent.frame(), timeout = 3600)"},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_eval.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Evaluate Expression in Worker — worker_eval","text":"worker shard_worker object. expr Expression evaluate. envir Environment containing variables needed expr. timeout Numeric. Seconds wait result.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_eval.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Evaluate Expression in Worker — worker_eval","text":"result evaluation.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_is_alive.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if Worker is Alive — worker_is_alive","title":"Check if Worker is Alive — worker_is_alive","text":"Tests whether worker process still running.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_is_alive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if Worker is Alive — worker_is_alive","text":"","code":"worker_is_alive(worker)"},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_is_alive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if Worker is Alive — worker_is_alive","text":"worker shard_worker object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_is_alive.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if Worker is Alive — worker_is_alive","text":"Logical. TRUE worker alive.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_kill.html","id":null,"dir":"Reference","previous_headings":"","what":"Kill a Worker Process — worker_kill","title":"Kill a Worker Process — worker_kill","text":"Terminates worker process closes connections.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_kill.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Kill a Worker Process — worker_kill","text":"","code":"worker_kill(worker)"},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_kill.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Kill a Worker Process — worker_kill","text":"worker shard_worker object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_kill.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Kill a Worker Process — worker_kill","text":"NULL (invisibly).","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_metrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Worker Metrics — worker_metrics","title":"Get Worker Metrics — worker_metrics","text":"Returns current metrics worker.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_metrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Worker Metrics — worker_metrics","text":"","code":"worker_metrics(worker)"},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_metrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Worker Metrics — worker_metrics","text":"worker shard_worker object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_metrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Worker Metrics — worker_metrics","text":"list worker metrics.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_recycle.html","id":null,"dir":"Reference","previous_headings":"","what":"Recycle a Worker — worker_recycle","title":"Recycle a Worker — worker_recycle","text":"Kills current worker spawns fresh replacement. new worker inherits ID fresh R process.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_recycle.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Recycle a Worker — worker_recycle","text":"","code":"worker_recycle(worker, init_expr = NULL, packages = NULL, dev_path = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_recycle.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Recycle a Worker — worker_recycle","text":"worker shard_worker object. init_expr Expression evaluate startup. packages Character vector. Packages load.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_recycle.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Recycle a Worker — worker_recycle","text":"new shard_worker object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_rss.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Worker RSS (Resident Set Size) — worker_rss","title":"Get Worker RSS (Resident Set Size) — worker_rss","text":"Queries worker's memory usage via ps package available, otherwise falls back /proc Linux ps command.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_rss.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Worker RSS (Resident Set Size) — worker_rss","text":"","code":"worker_rss(worker)"},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_rss.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Worker RSS (Resident Set Size) — worker_rss","text":"worker shard_worker object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_rss.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Worker RSS (Resident Set Size) — worker_rss","text":"Numeric. RSS bytes, NA unavailable.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_spawn.html","id":null,"dir":"Reference","previous_headings":"","what":"Spawn a Worker Process — worker_spawn","title":"Spawn a Worker Process — worker_spawn","text":"Creates new R worker process using parallel sockets.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_spawn.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Spawn a Worker Process — worker_spawn","text":"","code":"worker_spawn(id, init_expr = NULL, packages = NULL, dev_path = NULL)"},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_spawn.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Spawn a Worker Process — worker_spawn","text":"id Integer. Worker identifier. init_expr Expression evaluate startup. packages Character vector. Packages load.","code":""},{"path":"https://bbuchsbaum.github.io/shard/reference/worker_spawn.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Spawn a Worker Process — worker_spawn","text":"shard_worker object.","code":""},{"path":"https://bbuchsbaum.github.io/shard/why-shard-is-different.html","id":null,"dir":"","previous_headings":"","what":"Why shard is different","title":"Why shard is different","text":"shard parallel execution runtime R designed deterministic memory behavior zero-copy parallel reads. document benchmark-first: focuses measurable outcomes (time, peak memory, memory returning, hidden copies), slogans.","code":""},{"path":"https://bbuchsbaum.github.io/shard/why-shard-is-different.html","id":"the-pain-shard-fixes-and-why-existing-tools-struggle","dir":"","previous_headings":"","what":"The pain shard fixes (and why existing tools struggle)","title":"Why shard is different","text":"R parallel backends suffer least one : Input duplication Big inputs get serialized duplicated every worker (PSOCK) accidentally copied mutation (fork/COW edge cases). Hidden copies “small” change triggers copy--modify huge object. Native code sometimes writes inputs unexpectedly. find RSS explodes. Non-deterministic memory lifetime GC timing + allocator fragmentation makes memory come back. Long runs drift upward eventually hit OOM. Worker heap drift Even task “small”, workers accumulate fragmentation / cached allocations / package-level caches.","code":""},{"path":"https://bbuchsbaum.github.io/shard/why-shard-is-different.html","id":"what-shard-changes-the-contract","dir":"","previous_headings":"","what":"What shard changes (the contract)","title":"Why shard is different","text":"shard introduces stricter, reliable contract:","code":""},{"path":"https://bbuchsbaum.github.io/shard/why-shard-is-different.html","id":"id_1-shared-inputs-are-immutable-by-default","dir":"","previous_headings":"What shard changes (the contract)","what":"1) Shared inputs are immutable (by default)","title":"Why shard is different","text":"Large inputs stored attached workers. - per-task serialization. - accidental -place modification shared inputs. - try mutate borrowed inputs: error (default).","code":""},{"path":"https://bbuchsbaum.github.io/shard/why-shard-is-different.html","id":"id_2-outputs-are-explicit-buffers","dir":"","previous_headings":"What shard changes (the contract)","what":"2) Outputs are explicit buffers","title":"Why shard is different","text":"Instead returning massive objects worker, tasks write typed buffers. - Eliminates huge result-gather lists. - Enables idempotent retries (safe re-run shard overwrites slice).","code":""},{"path":"https://bbuchsbaum.github.io/shard/why-shard-is-different.html","id":"id_3-deterministic-cleanup-via-supervision--recycling","dir":"","previous_headings":"What shard changes (the contract)","what":"3) Deterministic cleanup via supervision + recycling","title":"Why shard is different","text":"shard rely GC behavior “nice”. - monitors memory drift. - recycles workers drift exceeds thresholds. - worker crashes/OOMs, restarts requeues work safely.","code":""},{"path":"https://bbuchsbaum.github.io/shard/why-shard-is-different.html","id":"id_4-diagnostics-you-can-prove","dir":"","previous_headings":"What shard changes (the contract)","what":"4) Diagnostics you can prove","title":"Why shard is different","text":"shard reports: - peak RSS (total + per-worker) - end RSS (memory come back?) - materialized bytes (hidden copies) - recycling events retries - (optional) COW auditing signals","code":""},{"path":"https://bbuchsbaum.github.io/shard/why-shard-is-different.html","id":"results-snapshot-fill-with-your-measured-numbers","dir":"","previous_headings":"","what":"Results snapshot (fill with your measured numbers)","title":"Why shard is different","text":"Note: table template. Replace placeholders values inst/bench/ runs. Hardware/Software - CPU: - RAM: - OS: - R version: - BLAS/LAPACK: - Dataset sizes: T = , P = , V = __","code":""},{"path":[]},{"path":"https://bbuchsbaum.github.io/shard/why-shard-is-different.html","id":"benchmark-b-10k-task-simulation-sweep-memory-drift-stress-test","dir":"","previous_headings":"Results snapshot (fill with your measured numbers)","what":"Benchmark B: 10k-task simulation sweep (memory drift stress test)","title":"Why shard is different","text":"“good” looks like - Peak RSS: substantially lower PSOCK-based approaches big shared inputs - End RSS: returns close baseline (recycling) - Hidden copies: near zero shared, immutable inputs hot path - Drift: flat RSS long runs","code":""},{"path":"https://bbuchsbaum.github.io/shard/why-shard-is-different.html","id":"why-this-matters-across-the-r-ecosystem","dir":"","previous_headings":"","what":"Why this matters across the R ecosystem","title":"Why shard is different","text":"workload looks like “numeric work many slices big data”, shard designed : - scale cores without multiplying memory - remain stable long runs - surface memory/copy problems diagnostics instead surprises","code":""},{"path":"https://bbuchsbaum.github.io/shard/why-shard-is-different.html","id":"reproducing-benchmarks","dir":"","previous_headings":"","what":"Reproducing benchmarks","title":"Why shard is different","text":"Bench scripts live inst/bench/. Recommended run pattern: - warm-- fixed seeds - multiple repetitions - report median time + max peak RSS Outputs: - results.csv - shard_report.json (optional) - plots (time vs workers, peak RSS vs workers, RSS drift task index)","code":""}]
