# shard - Deterministic, Zero-Copy Parallel Execution for R
# Makevars for Unix-like systems (Linux, macOS)

PKG_CFLAGS = -D_POSIX_C_SOURCE=200809L $(SHLIB_OPENMP_CFLAGS)
PKG_LIBS = $(SHLIB_OPENMP_CFLAGS) -lrt

# On macOS, -lrt is not needed
UNAME := $(shell uname)
ifeq ($(UNAME), Darwin)
  PKG_LIBS = $(SHLIB_OPENMP_CFLAGS)
endif

# Source files
SOURCES = init.c segment.c buffer.c
OBJECTS = $(SOURCES:.c=.o)
